{"version":3,"file":"js/Login.6656bf3a.js","mappings":"oJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,aAAaH,EAAG,iBAAiB,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,SAAW,GAAG,UAAY,GAAG,MAAQ,MAAM,YAAc,SAAS,MAAQP,EAAIQ,MAAMC,MAAM,CAACC,MAAOV,EAAIW,KAAW,OAAEC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIW,KAAM,SAAUE,IAAME,WAAW,iBAAiBX,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAW,MAAQ,KAAK,YAAc,QAAQ,SAAW,IAAIS,GAAG,CAAC,KAAOhB,EAAIiB,OAAOR,MAAM,CAACC,MAAOV,EAAIW,KAAS,KAAEC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIW,KAAM,OAAQE,IAAME,WAAW,gBAAgB,GAAGX,EAAG,aAAa,CAACc,YAAY,CAAC,aAAa,OAAO,OAAS,QAAQX,MAAM,CAAC,MAAQ,GAAG,KAAO,UAAU,QAAUP,EAAImB,MAAM,SAAWnB,EAAImB,OAAOH,GAAG,CAAC,MAAQhB,EAAIoB,WAAW,CAACpB,EAAIqB,GAAG,SAAS,IACj0BC,EAAkB,G,6BCwBtB,GACAC,KAAAA,QACAC,OACA,OACAb,KAAAA,CACAc,OAAAA,cACAC,KAAAA,UAEAlB,MAAAA,EACAW,OAAAA,IAGAQ,QAAAA,CAEAV,QACA,qDACA,aAEA,cAGA,iBAEA,cACA,IACA,iCAGA,IAFAW,EAAAA,EAAAA,IAAAA,EAAAA,KAAAA,KAAAA,OACAC,aAAAA,QAAAA,gBAAAA,EAAAA,KAAAA,KAAAA,oBACA,iCACA,yCACA,CACA,mCACAC,EAAAA,EAAAA,MAAAA,GACA,qBAEAD,aAAAA,WAAAA,QACA,UAGAE,EAAAA,EAAAA,GAAAA,WAEA,iBClEiQ,I,UCQ7PC,GAAY,OACd,EACAjC,EACAuB,GACA,EACA,KACA,WACA,MAIF,EAAeU,EAAiB","sources":["webpack://hmtt/./src/views/login.vue?627e","webpack://hmtt/src/views/login.vue","webpack://hmtt/./src/views/login.vue?2d82","webpack://hmtt/./src/views/login.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"},[_c('van-nav-bar',{attrs:{\"title\":\"论坛头条—登录\"}}),_c('van-cell-group',[_c('van-field',{attrs:{\"required\":\"\",\"clearable\":\"\",\"label\":\"手机号\",\"placeholder\":\"请输入手机号\",\"error\":_vm.flag},model:{value:(_vm.user.mobile),callback:function ($$v) {_vm.$set(_vm.user, \"mobile\", $$v)},expression:\"user.mobile\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"required\":\"\"},on:{\"blur\":_vm.leave},model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", $$v)},expression:\"user.code\"}})],1),_c('van-button',{staticStyle:{\"margin-top\":\"16px\",\"height\":\"40px\"},attrs:{\"round\":\"\",\"type\":\"primary\",\"loading\":_vm.flag1,\"disabled\":_vm.flag1},on:{\"click\":_vm.onSubmit}},[_vm._v(\"登录\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"box\">\r\n    <van-nav-bar title=\"论坛头条—登录\" />\r\n    <van-cell-group>\r\n      <van-field v-model=\"user.mobile\" required clearable label=\"手机号\" placeholder=\"请输入手机号\" :error=\"flag\" />\r\n\r\n      <van-field v-model=\"user.code\" type=\"password\" label=\"密码\" placeholder=\"请输入密码\" required @blur=\"leave\" />\r\n    </van-cell-group>\r\n    <van-button round type=\"primary\" @click=\"onSubmit\" style=\"margin-top: 16px; height: 40px\" :loading=\"flag1\"\r\n      :disabled=\"flag1\">登录</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    mapMutations\r\n  } from \"vuex\"\r\n  //导入请求后台数据检测的登录请求\r\n  import {\r\n    loginAPI\r\n  } from '@/api/index.js'\r\n  import Notify from \"@/ui/Notify.js\"\r\n  import {\r\n    setToken\r\n  } from '@/utils/token.js'\r\n  export default {\r\n    name: 'login',\r\n    data() {\r\n      return {\r\n        user: {\r\n          mobile: '13812345678', //手机号\r\n          code: '246810', //密码（246810）必须是这个\r\n        },\r\n        flag: false,\r\n        flag1: false,\r\n      }\r\n    },\r\n    methods: {\r\n      //焦点离开判断手机号是否正确\r\n      leave() {\r\n        if (this.user.mobile.length === 11 && this.user.code == 246810) {\r\n          this.flag = false\r\n        } else {\r\n          this.flag = true\r\n        }\r\n      },\r\n      async onSubmit() {\r\n        //控制加载圆圈\r\n        this.flag1 = true\r\n        try {\r\n          const res = await loginAPI(this.user)\r\n          setToken(res.data.data.token)\r\n          localStorage.setItem('refresh_token', res.data.data.refresh_token)\r\n          if (localStorage.getItem('hash') === undefined) {\r\n            this.$router.replace('/layout/home')\r\n          } else {\r\n            let hash = localStorage.getItem('hash')\r\n            hash = hash.slice(1)\r\n            this.$router.push(hash)\r\n          }\r\n          localStorage.removeItem('hash')\r\n        } catch (err) {\r\n          //try-catch可以捕获请求失败的错误，错误将会利用catch进入\r\n          //这个是vant的弹框组件，失败时调用这个组件\r\n          Notify('账号或密码错误')\r\n        }\r\n        this.flag1 = false\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .box {\r\n    text-align: center;\r\n  }\r\n\r\n  .van-nav-bar {\r\n    background-color: #007bff;\r\n  }\r\n\r\n  /deep/.van-nav-bar__title {\r\n    color: white;\r\n  }\r\n\r\n  .van-button {\r\n    background-color: #007bff;\r\n    border: none;\r\n    width: 340px;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=0b5e1a49&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=0b5e1a49&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b5e1a49\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","flag","model","value","user","callback","$$v","$set","expression","on","leave","staticStyle","flag1","onSubmit","_v","staticRenderFns","name","data","mobile","code","methods","setToken","localStorage","hash","Notify","component"],"sourceRoot":""}