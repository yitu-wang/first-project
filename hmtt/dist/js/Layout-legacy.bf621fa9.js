(self["webpackChunkhmtt"]=self["webpackChunkhmtt"]||[]).push([[496],{3461:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("keep-alive",[n("router-view")],1),n("van-tabbar",{attrs:{route:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tabbar-item",{attrs:{icon:"home-o",to:"/layout/home"}},[t._v("首页")]),n("van-tabbar-item",{attrs:{icon:"setting-o",to:"/layout/user"}},[t._v("我的")])],1)],1)},i=[],a={name:"layout",data:function(){return{active:0}}},s=a,o=n(1001),c=(0,o.Z)(s,r,i,!1,null,null,null),u=c.exports},4401:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return E}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box",staticStyle:{"padding-bottom":"44px"}},[n("div",[n("van-nav-bar",{staticStyle:{"background-color":"#007bff"},attrs:{fixed:""}},[n("template",{staticClass:"text",slot:"left"},[t._v(" 论坛头条 ")]),n("van-icon",{attrs:{slot:"right",name:"search",color:"#ffffff"},on:{click:function(e){return t.$router.push("/search")}},slot:"right"})],2)],1),n("div",{staticClass:"main"},[n("van-tabs",{attrs:{sticky:"","offset-top":"44px"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.userList,(function(t,e){return n("van-tab",{key:t.id,attrs:{title:t.name,name:t.id}},[n("ArticleList",{staticStyle:{"margin-top":"44px"},attrs:{articleListID:t.id}})],1)})),1),n("van-icon",{staticClass:"moreChannels",attrs:{name:"plus",size:"14px"},on:{click:t.showPopup}})],1),n("van-popup",{staticClass:"popup",model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("ChannelIEdit",{attrs:{userList:t.userList,unCheckList:t.unCheckList},on:{addChannelEV:t.addChannelFn,channelShow:t.channelShow,removeChannelEV:t.removeChannelFn},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}})],1)],1)},i=[],a=n(7673),s=n(6198),o=(n(7327),n(1539),n(4553),n(561),n(693)),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1,offset:"50"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articleList,(function(e){return n("item",{key:e.art_id,attrs:{article:e},nativeOn:{click:function(n){return t.$router.push("/detail?art_id="+e.art_id)}}})})),1)],1)],1)},u=[],l=n(2220),f=(n(9653),n(2222),n(791)),h={components:{item:f.Z},props:{articleListID:Number},created:function(){this.getArticleList()},data:function(){return{articleList:[],loading:!1,finished:!1,theTime:(new Date).getTime(),isLoading:!1}},methods:{getArticleList:function(){var t=this;return(0,s.Z)((0,a.Z)().mark((function e(){var n,r;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Us)({channel_id:t.articleListID,timestamp:t.theTime});case 2:if(n=e.sent,r=n.data,t.articleList=[].concat((0,l.Z)(t.articleList),(0,l.Z)(r.data.results)),t.theTime=r.data.pre_timestamp,t.loading=!1,t.isLoading=!1,null!==r.data.pre_timestamp){e.next=11;break}return t.finished=!0,e.abrupt("return");case 11:case"end":return e.stop()}}),e)})))()},onLoad:function(){0!==this.articleList.length?this.getArticleList():this.loading=!1},onRefresh:function(){var t=this;return(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.articleList=[],t.getArticleList(),t.$toast("刷新成功");case 3:case"end":return e.stop()}}),e)})))()}}},d=h,v=n(1001),p=(0,v.Z)(d,c,u,!1,null,null,null),m=p.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"挑选频道","right-text":"X"},on:{"click-right":t.onClickRight}}),n("div",{staticClass:"my"},[n("van-cell",{attrs:{title:"我的频道",value:t.titleText},on:{click:t.checkText}}),t._l(t.userList,(function(e){return n("van-button",{key:e.id,attrs:{type:"default"},on:{click:function(n){return t.userDeChannel(e)}}},[t._v(t._s(e.name)+" "),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.iconShow&&0!==e.id,expression:"iconShow && item.id !== 0"}],attrs:{name:"cross"}})],1)}))],2),n("div",{staticClass:"more"},[n("van-cell",{attrs:{title:"点击添加更多频道"}}),t._l(t.unCheckList,(function(e){return n("van-button",{key:e.id,attrs:{type:"default"},on:{click:function(n){return t.moreFn(e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1)},g=[],b={name:"channeliedit",data:function(){return{iconShow:!1,titleText:"编辑"}},methods:{onClickRight:function(){this.iconShow=!1,this.titleText="编辑",this.$emit("channelShow",!1)},checkText:function(){this.iconShow?(this.iconShow=!1,this.titleText="编辑"):(this.iconShow=!0,this.titleText="完成")},moreFn:function(t){this.iconShow&&this.$emit("addChannelEV",t)},userDeChannel:function(t){!0===this.iconShow?0!==t.id&&this.$emit("removeChannelEV",t.id):!1===this.iconShow&&(this.$emit("channelShow",!1),this.$emit("input",t.id))}},props:{userList:Array,unCheckList:Array}},_=b,x=(0,v.Z)(_,w,g,!1,null,"14e8c2c6",null),L=x.exports,k={name:"home",data:function(){return{active:0,userList:[],allList:[],show:!1}},created:function(){var t=this;return(0,s.Z)((0,a.Z)().mark((function e(){var n,r,i,s;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.lS)();case 2:return n=e.sent,r=n.data,t.userList=r.data.channels,e.next=7,(0,o.Of)();case 7:i=e.sent,s=i.data,t.allList=s.data.channels;case 10:case"end":return e.stop()}}),e)})))()},components:{ArticleList:m,ChannelIEdit:L},mounted:function(){window.addEventListener("scroll",this.scrollListen)},methods:{scrollListen:function(){this.$route.meta.scrollT=document.documentElement&&document.documentElement.scrollTop},showPopup:function(){this.show=!0},addChannelFn:function(t){var e=this;return(0,s.Z)((0,a.Z)().mark((function n(){var r;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.userList.push(t),r=e.userList.filter((function(t){return 0!==t.id})),n.next=4,(0,o.w0)(r);case 4:n.sent;case 5:case"end":return n.stop()}}),n)})))()},removeChannelFn:function(t){var e=this;return(0,s.Z)((0,a.Z)().mark((function n(){var r;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.userList.findIndex((function(e){return e.id===t})),e.userList.splice(r,1),n.next=4,(0,o.Mz)({channelID:t});case 4:n.sent,e.active=t;case 6:case"end":return n.stop()}}),n)})))()},channelShow:function(t){this.show=t}},computed:{unCheckList:function(){var t=this,e=this.allList.filter((function(e){var n=t.userList.some((function(t){return t.id===e.id}));return!n}));return e}},deactivated:function(){window.removeEventListener("scroll",this.scrollListen)},activated:function(){this.$route.meta.scrollT>0&&(window.scrollTo(0,this.$route.meta.scrollT),this.$route.meta.scrollT=0,window.addEventListener("scroll",this.scrollListen))}},y=k,C=(0,v.Z)(y,r,i,!1,null,"62641cfa",null),E=C.exports},3084:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return p}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"top"},[n("div",{staticClass:"user"},[n("img",{attrs:{src:t.userphoto,alt:""}}),n("div",{staticClass:"user-name"},[n("span",[t._v(t._s(t.username))]),n("button",[t._v("申请认证")])])]),n("div",{staticClass:"top-bot"},[n("ul",[n("li",[n("p",[t._v(t._s(t.user.art_count))]),n("p",[t._v("动态")])]),n("li",[n("p",[t._v(t._s(t.user.follow_count))]),n("p",[t._v("关注")])]),n("li",[n("p",[t._v(t._s(t.user.fans_count))]),n("p",[t._v("粉丝")])])])])]),n("div",{staticClass:"bottom"},[n("div",{on:{click:function(e){return t.$router.push("/edit")}}},[n("van-nav-bar",[n("van-icon",{attrs:{slot:"left",name:"edit"},slot:"left"},[t._v(" 编辑资料")]),n("van-icon",{attrs:{slot:"right",name:"arrow"},slot:"right"})],1)],1),n("div",{on:{click:function(e){return t.$router.push("/chat")}}},[n("van-nav-bar",[n("van-icon",{attrs:{slot:"left",name:"chat-o"},slot:"left"},[t._v(" 小思同学")]),n("van-icon",{attrs:{slot:"right",name:"arrow"},slot:"right"})],1)],1),n("div",{on:{click:t.quitFn}},[n("van-nav-bar",[n("van-icon",{attrs:{slot:"left",name:"warning-o"},slot:"left"},[t._v(" 退出登录")]),n("van-icon",{attrs:{slot:"right",name:"arrow"},slot:"right"})],1)],1)])])},i=[],a=n(3019),s=n(7673),o=n(6198),c=(n(8309),n(4916),n(5306),n(7906)),u=n(693),l=n(629),f={name:"user",data:function(){return{user:{}}},activated:function(){var t=this;return(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,u._q)();case 2:n=e.sent,t.user=n.data.data,t.set_userphoto(t.user.photo),t.set_username(t.user.name);case 6:case"end":return e.stop()}}),e)})))()},methods:(0,a.Z)((0,a.Z)({},(0,l.OI)(["set_userphoto","set_username"])),{},{quitFn:function(){var t=this;c.Z.confirm({title:"提示",message:"确定要退出登陆吗"}).then((function(){localStorage.clear(),t.set_username(""),t.$router.replace("/layout/home")})).catch((function(){}))}}),computed:(0,a.Z)({},(0,l.rn)(["userphoto","username"]))},h=f,d=n(1001),v=(0,d.Z)(h,r,i,!1,null,"8d6dec80",null),p=v.exports},5117:function(t,e,n){"use strict";var r=n(6330),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw i("Cannot delete property "+r(e)+" of "+r(t))}},3111:function(t,e,n){var r=n(1702),i=n(4488),a=n(1340),s=n(1361),o=r("".replace),c="["+s+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),f=function(t){return function(e){var n=a(i(e));return 1&t&&(n=o(n,u,"")),2&t&&(n=o(n,l,"")),n}};t.exports={start:f(1),end:f(2),trim:f(3)}},863:function(t,e,n){var r=n(1702);t.exports=r(1..valueOf)},1361:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},7327:function(t,e,n){"use strict";var r=n(2109),i=n(2092).filter,a=n(1194),s=a("filter");r({target:"Array",proto:!0,forced:!s},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},4553:function(t,e,n){"use strict";var r=n(2109),i=n(2092).findIndex,a=n(1223),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},561:function(t,e,n){"use strict";var r=n(2109),i=n(7908),a=n(1400),s=n(9303),o=n(6244),c=n(7207),u=n(5417),l=n(6135),f=n(5117),h=n(1194),d=h("splice"),v=Math.max,p=Math.min;r({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var n,r,h,d,m,w,g=i(this),b=o(g),_=a(t,b),x=arguments.length;for(0===x?n=r=0:1===x?(n=0,r=b-_):(n=x-2,r=p(v(s(e),0),b-_)),c(b+n-r),h=u(g,r),d=0;d<r;d++)m=_+d,m in g&&l(h,d,g[m]);if(h.length=r,n<r){for(d=_;d<b-r;d++)m=d+r,w=d+n,m in g?g[w]=g[m]:f(g,w);for(d=b;d>b-r+n;d--)f(g,d-1)}else if(n>r)for(d=b-r;d>_;d--)m=d+r-1,w=d+n-1,m in g?g[w]=g[m]:f(g,w);for(d=0;d<n;d++)g[d+_]=arguments[d+2];return g.length=b-r+n,h}})},9653:function(t,e,n){"use strict";var r=n(9781),i=n(7854),a=n(1702),s=n(4705),o=n(8052),c=n(2597),u=n(9587),l=n(7976),f=n(2190),h=n(7593),d=n(7293),v=n(8006).f,p=n(1236).f,m=n(3070).f,w=n(863),g=n(3111).trim,b="Number",_=i[b],x=_.prototype,L=i.TypeError,k=a("".slice),y=a("".charCodeAt),C=function(t){var e=h(t,"number");return"bigint"==typeof e?e:E(e)},E=function(t){var e,n,r,i,a,s,o,c,u=h(t,"number");if(f(u))throw L("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=g(u),e=y(u,0),43===e||45===e){if(n=y(u,2),88===n||120===n)return NaN}else if(48===e){switch(y(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=k(u,2),s=a.length,o=0;o<s;o++)if(c=y(a,o),c<48||c>i)return NaN;return parseInt(a,r)}return+u};if(s(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var Z,O=function(t){var e=arguments.length<1?0:_(C(t)),n=this;return l(x,n)&&d((function(){w(n)}))?u(Object(e),n,O):e},I=r?v(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),S=0;I.length>S;S++)c(_,Z=I[S])&&!c(O,Z)&&m(O,Z,p(_,Z));O.prototype=x,x.constructor=O,o(i,b,O,{constructor:!0})}},5003:function(t,e,n){var r=n(2109),i=n(7293),a=n(5656),s=n(1236).f,o=n(9781),c=i((function(){s(1)})),u=!o||c;r({target:"Object",stat:!0,forced:u,sham:!o},{getOwnPropertyDescriptor:function(t,e){return s(a(t),e)}})},9337:function(t,e,n){var r=n(2109),i=n(9781),a=n(3887),s=n(5656),o=n(1236),c=n(6135);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=s(t),i=o.f,u=a(r),l={},f=0;while(u.length>f)n=i(r,e=u[f++]),void 0!==n&&c(l,e,n);return l}})},7941:function(t,e,n){var r=n(2109),i=n(7908),a=n(1956),s=n(7293),o=s((function(){a(1)}));r({target:"Object",stat:!0,forced:o},{keys:function(t){return a(i(t))}})},3019:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});n(7941),n(2526),n(7327),n(1539),n(5003),n(4747),n(9337);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}}}]);
//# sourceMappingURL=Layout-legacy.bf621fa9.js.map