{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\n// Utils\nimport { createNamespace } from '../../utils'; // Components\n\nimport Uploader from '../../uploader';\nvar namespace = createNamespace('sku-img-uploader');\nvar createComponent = namespace[0];\nvar t = namespace[2];\nexport default createComponent({\n  props: {\n    value: String,\n    uploadImg: Function,\n    customUpload: Function,\n    maxSize: {\n      type: Number,\n      default: 6\n    }\n  },\n  data: function data() {\n    return {\n      fileList: []\n    };\n  },\n  watch: {\n    value: function value(val) {\n      if (val) {\n        this.fileList = [{\n          url: val,\n          isImage: true\n        }];\n      } else {\n        this.fileList = [];\n      }\n    }\n  },\n  methods: {\n    afterReadFile: function afterReadFile(file) {\n      var _this = this;\n\n      file.status = 'uploading';\n      file.message = t('uploading');\n      this.uploadImg(file.file, file.content).then(function (img) {\n        file.status = 'done';\n\n        _this.$emit('input', img);\n      }).catch(function () {\n        file.status = 'failed';\n        file.message = t('fail');\n      });\n    },\n    onOversize: function onOversize() {\n      this.$toast(t('oversize', this.maxSize));\n    },\n    onDelete: function onDelete() {\n      this.$emit('input', '');\n    },\n    onClickUpload: function onClickUpload() {\n      var _this2 = this;\n\n      if (this.customUpload) {\n        this.customUpload().then(function (url) {\n          _this2.fileList.push({\n            url: url\n          });\n\n          _this2.$emit('input', url);\n        });\n      }\n    }\n  },\n  render: function render() {\n    var _this3 = this;\n\n    var h = arguments[0];\n    return h(Uploader, {\n      \"attrs\": {\n        \"maxCount\": 1,\n        \"readonly\": !!this.customUpload,\n        \"maxSize\": this.maxSize * 1024 * 1024,\n        \"afterRead\": this.afterReadFile\n      },\n      \"on\": {\n        \"oversize\": this.onOversize,\n        \"delete\": this.onDelete,\n        \"click-upload\": this.onClickUpload\n      },\n      \"model\": {\n        value: _this3.fileList,\n        callback: function callback($$v) {\n          _this3.fileList = $$v;\n        }\n      }\n    });\n  }\n});","map":{"version":3,"names":["createNamespace","Uploader","namespace","createComponent","t","props","value","String","uploadImg","Function","customUpload","maxSize","type","Number","default","data","fileList","watch","val","url","isImage","methods","afterReadFile","file","_this","status","message","content","then","img","$emit","catch","onOversize","$toast","onDelete","onClickUpload","_this2","push","render","_this3","h","arguments","callback","$$v"],"sources":["C:/Users/小王/node_modules/vant/es/sku/components/SkuImgUploader.js"],"sourcesContent":["// Utils\nimport { createNamespace } from '../../utils'; // Components\n\nimport Uploader from '../../uploader';\nvar namespace = createNamespace('sku-img-uploader');\nvar createComponent = namespace[0];\nvar t = namespace[2];\nexport default createComponent({\n  props: {\n    value: String,\n    uploadImg: Function,\n    customUpload: Function,\n    maxSize: {\n      type: Number,\n      default: 6\n    }\n  },\n  data: function data() {\n    return {\n      fileList: []\n    };\n  },\n  watch: {\n    value: function value(val) {\n      if (val) {\n        this.fileList = [{\n          url: val,\n          isImage: true\n        }];\n      } else {\n        this.fileList = [];\n      }\n    }\n  },\n  methods: {\n    afterReadFile: function afterReadFile(file) {\n      var _this = this;\n\n      file.status = 'uploading';\n      file.message = t('uploading');\n      this.uploadImg(file.file, file.content).then(function (img) {\n        file.status = 'done';\n\n        _this.$emit('input', img);\n      }).catch(function () {\n        file.status = 'failed';\n        file.message = t('fail');\n      });\n    },\n    onOversize: function onOversize() {\n      this.$toast(t('oversize', this.maxSize));\n    },\n    onDelete: function onDelete() {\n      this.$emit('input', '');\n    },\n    onClickUpload: function onClickUpload() {\n      var _this2 = this;\n\n      if (this.customUpload) {\n        this.customUpload().then(function (url) {\n          _this2.fileList.push({\n            url: url\n          });\n\n          _this2.$emit('input', url);\n        });\n      }\n    }\n  },\n  render: function render() {\n    var _this3 = this;\n\n    var h = arguments[0];\n    return h(Uploader, {\n      \"attrs\": {\n        \"maxCount\": 1,\n        \"readonly\": !!this.customUpload,\n        \"maxSize\": this.maxSize * 1024 * 1024,\n        \"afterRead\": this.afterReadFile\n      },\n      \"on\": {\n        \"oversize\": this.onOversize,\n        \"delete\": this.onDelete,\n        \"click-upload\": this.onClickUpload\n      },\n      \"model\": {\n        value: _this3.fileList,\n        callback: function callback($$v) {\n          _this3.fileList = $$v;\n        }\n      }\n    });\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}