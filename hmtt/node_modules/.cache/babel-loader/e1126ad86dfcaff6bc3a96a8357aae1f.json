{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/\\u5C0F\\u738B/Desktop/heimamm/hmtt/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/\\u5C0F\\u738B/Desktop/heimamm/hmtt/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//导入x号点击模板\nimport { firstActions, secondActions } from '@/api/report.js';\nimport { timeAgo } from '@/utils/date.js';\nimport { dislikeArticleAPI } from '@/api/index.js';\nimport { Notify } from 'vant';\nexport default {\n  props: {\n    article: []\n  },\n  data: function data() {\n    return {\n      bottomText: '取消',\n      formatTime: timeAgo,\n      show: false,\n      actions: [{\n        name: '不感兴趣'\n      }, {\n        name: '反馈垃圾信息' //点击这个按钮时进行数据的切换\n        //监听用户点击的是哪个按钮\n\n      }]\n    };\n  },\n  methods: {\n    //点击选项事件\n    onSelect: function onSelect(item) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(item.name === '反馈垃圾信息')) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _this.actions = secondActions;\n                _this.bottomText = '返回';\n                _context.next = 11;\n                break;\n\n              case 5:\n                if (!(item.name === '不感兴趣')) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _context.next = 8;\n                return dislikeArticleAPI(_this.article.art_id);\n\n              case 8:\n                res = _context.sent;\n                console.log(res);\n                Notify({\n                  massage: '反馈成功',\n                  background: 'greed'\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    //点击取消事件\n    onCancel: function onCancel() {\n      if (this.bottomText === '返回') {\n        this.show = true;\n        this.actions = firstActions;\n        this.bottomText = '取消';\n      } else {\n        this.show = false;\n      }\n    },\n    //点击蒙版取消事件\n    closeFn: function closeFn() {\n      this.actions = firstActions;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;EACAA;IACAC;EADA,CADA;EAIAC,IAJA,kBAIA;IACA;MACAC,gBADA;MAEAC,mBAFA;MAGAC,WAHA;MAIAC,UACA;QACAC;MADA,CADA,EAIA;QACAA,cADA,CAEA;QACA;;MAHA,CAJA;IAJA;EAeA,CApBA;EAqBAC;IACA;IACAC,QAFA,oBAEAC,IAFA,EAEA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MAGAA,sBAHA;kBAAA;kBAAA;gBAAA;;gBAIA;gBACA;gBALA;gBAAA;;cAAA;gBAAA,MAMAA,oBANA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAOAC,uCAPA;;cAAA;gBAOAC,GAPA;gBAQAC;gBACAC;kBAAAC;kBAAAC;gBAAA;;cATA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAWA,CAbA;IAcA;IACAC,QAfA,sBAeA;MACA;QACA;QACA;QACA;MACA,CAJA,MAIA;QACA;MACA;IACA,CAvBA;IAwBA;IACAC,OAzBA,qBAyBA;MACA;IACA;EA3BA;AArBA","names":["props","article","data","bottomText","formatTime","show","actions","name","methods","onSelect","item","dislikeArticleAPI","res","console","Notify","massage","background","onCancel","closeFn"],"sourceRoot":"src/components","sources":["ArticleItem.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-cell>\r\n      <!-- 标题区域的插槽 -->\r\n      <template #title>\r\n        <div class=\"title-box\">\r\n          <!-- 标题 -->\r\n          <span>{{ article.title }}</span>\r\n          <!-- 单张图片 -->\r\n          <img\r\n            :src=\"article.cover.images[0]\"\r\n            alt=\"\"\r\n            class=\"thumb\"\r\n            v-if=\"article.cover.type === 1\"\r\n          />\r\n        </div>\r\n        <!-- 三张图片 -->\r\n        <div class=\"thumb-box\" v-if=\"article.cover.type === 3\">\r\n          <img :src=\"article.cover.images[0]\" alt=\"\" class=\"thumb\" />\r\n          <img :src=\"article.cover.images[1]\" alt=\"\" class=\"thumb\" />\r\n          <img :src=\"article.cover.images[2]\" alt=\"\" class=\"thumb\" />\r\n        </div>\r\n      </template>\r\n      <!-- label 区域的插槽 -->\r\n      <template #label>\r\n        <div class=\"label-box\">\r\n          <span\r\n            >{{ article.aut_name }} &nbsp;&nbsp; {{ article.comm_count }}评论\r\n            &nbsp;&nbsp; 发布日期 {{ formatTime(article.pubdate) }}</span\r\n          >\r\n          <!-- 关闭按钮 -->\r\n          <van-icon name=\"cross\" @click=\"show = true\" />\r\n        </div>\r\n      </template>\r\n    </van-cell>\r\n    <van-action-sheet\r\n      v-model=\"show\"\r\n      :actions=\"actions\"\r\n      :cancel-text=\"bottomText\"\r\n      @select=\"onSelect\"\r\n      @cancel=\"onCancel\"\r\n      @close=\"closeFn\"\r\n    />\r\n  </div>\r\n</template>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n//导入x号点击模板\r\nimport { firstActions, secondActions } from '@/api/report.js'\r\nimport { timeAgo } from '@/utils/date.js'\r\nimport { dislikeArticleAPI } from '@/api/index.js'\r\nimport { Notify } from 'vant'\r\nexport default {\r\n  props: {\r\n    article: [],\r\n  },\r\n  data() {\r\n    return {\r\n      bottomText: '取消',\r\n      formatTime: timeAgo,\r\n      show: false,\r\n      actions: [\r\n        {\r\n          name: '不感兴趣',\r\n        },\r\n        {\r\n          name: '反馈垃圾信息',\r\n          //点击这个按钮时进行数据的切换\r\n          //监听用户点击的是哪个按钮\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  methods: {\r\n    //点击选项事件\r\n    async onSelect(item) {\r\n      // 点击选项时默认不会关闭菜单，可以手动关闭\r\n      //item是点击的选项\r\n      if (item.name === '反馈垃圾信息') {\r\n        this.actions = secondActions\r\n        this.bottomText = '返回'\r\n      } else if (item.name === '不感兴趣') {\r\n        const res = await dislikeArticleAPI(this.article.art_id)\r\n        console.log(res)\r\n        Notify({ massage: '反馈成功', background: 'greed' })\r\n      }\r\n    },\r\n    //点击取消事件\r\n    onCancel() {\r\n      if (this.bottomText === '返回') {\r\n        this.show = true\r\n        this.actions = firstActions\r\n        this.bottomText = '取消'\r\n      } else {\r\n        this.show = false\r\n      }\r\n    },\r\n    //点击蒙版取消事件\r\n    closeFn() {\r\n      this.actions = firstActions\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.label-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.thumb {\r\n  // 矩形黄金比例：0.618\r\n  width: 113px;\r\n  height: 70px;\r\n  background-color: #f8f8f8;\r\n  object-fit: cover;\r\n}\r\n\r\n.title-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n}\r\n\r\n.thumb-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}