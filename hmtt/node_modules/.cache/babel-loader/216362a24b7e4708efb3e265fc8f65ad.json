{"ast":null,"code":"// Utils\nimport { createNamespace } from '../../utils';\nimport { stringToDate, dateToString } from '../utils/time-helper'; // Components\n\nimport Popup from '../../popup';\nimport DateTimePicker from '../../datetime-picker';\nimport Field from '../../field';\nvar namespace = createNamespace('sku-datetime-field');\nvar createComponent = namespace[0];\nvar t = namespace[2];\nexport default createComponent({\n  props: {\n    value: String,\n    label: String,\n    required: Boolean,\n    placeholder: String,\n    type: {\n      type: String,\n      default: 'date'\n    }\n  },\n  data: function data() {\n    return {\n      showDatePicker: false,\n      currentDate: this.type === 'time' ? '' : new Date(),\n      minDate: new Date(new Date().getFullYear() - 60, 0, 1)\n    };\n  },\n  watch: {\n    value: function value(val) {\n      switch (this.type) {\n        case 'time':\n          this.currentDate = val;\n          break;\n\n        case 'date':\n        case 'datetime':\n          this.currentDate = stringToDate(val) || new Date();\n          break;\n      }\n    }\n  },\n  computed: {\n    title: function title() {\n      return t(\"title.\" + this.type);\n    }\n  },\n  methods: {\n    onClick: function onClick() {\n      this.showDatePicker = true;\n    },\n    onConfirm: function onConfirm(val) {\n      var data = val;\n\n      if (this.type !== 'time') {\n        data = dateToString(val, this.type);\n      }\n\n      this.$emit('input', data);\n      this.showDatePicker = false;\n    },\n    onCancel: function onCancel() {\n      this.showDatePicker = false;\n    },\n    formatter: function formatter(type, val) {\n      var word = t(\"format.\" + type);\n      return \"\" + val + word;\n    }\n  },\n  render: function render() {\n    var _this = this;\n\n    var h = arguments[0];\n    return h(Field, {\n      \"attrs\": {\n        \"readonly\": true,\n        \"is-link\": true,\n        \"center\": true,\n        \"value\": this.value,\n        \"label\": this.label,\n        \"required\": this.required,\n        \"placeholder\": this.placeholder\n      },\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [h(Popup, {\n      \"attrs\": {\n        \"round\": true,\n        \"position\": \"bottom\",\n        \"getContainer\": \"body\"\n      },\n      \"slot\": \"extra\",\n      \"model\": {\n        value: _this.showDatePicker,\n        callback: function callback($$v) {\n          _this.showDatePicker = $$v;\n        }\n      }\n    }, [h(DateTimePicker, {\n      \"attrs\": {\n        \"type\": this.type,\n        \"title\": this.title,\n        \"value\": this.currentDate,\n        \"minDate\": this.minDate,\n        \"formatter\": this.formatter\n      },\n      \"on\": {\n        \"cancel\": this.onCancel,\n        \"confirm\": this.onConfirm\n      }\n    })])]);\n  }\n});","map":{"version":3,"names":["createNamespace","stringToDate","dateToString","Popup","DateTimePicker","Field","namespace","createComponent","t","props","value","String","label","required","Boolean","placeholder","type","default","data","showDatePicker","currentDate","Date","minDate","getFullYear","watch","val","computed","title","methods","onClick","onConfirm","$emit","onCancel","formatter","word","render","_this","h","arguments","callback","$$v"],"sources":["C:/Users/小王/node_modules/vant/es/sku/components/SkuDateTimeField.js"],"sourcesContent":["// Utils\nimport { createNamespace } from '../../utils';\nimport { stringToDate, dateToString } from '../utils/time-helper'; // Components\n\nimport Popup from '../../popup';\nimport DateTimePicker from '../../datetime-picker';\nimport Field from '../../field';\nvar namespace = createNamespace('sku-datetime-field');\nvar createComponent = namespace[0];\nvar t = namespace[2];\nexport default createComponent({\n  props: {\n    value: String,\n    label: String,\n    required: Boolean,\n    placeholder: String,\n    type: {\n      type: String,\n      default: 'date'\n    }\n  },\n  data: function data() {\n    return {\n      showDatePicker: false,\n      currentDate: this.type === 'time' ? '' : new Date(),\n      minDate: new Date(new Date().getFullYear() - 60, 0, 1)\n    };\n  },\n  watch: {\n    value: function value(val) {\n      switch (this.type) {\n        case 'time':\n          this.currentDate = val;\n          break;\n\n        case 'date':\n        case 'datetime':\n          this.currentDate = stringToDate(val) || new Date();\n          break;\n      }\n    }\n  },\n  computed: {\n    title: function title() {\n      return t(\"title.\" + this.type);\n    }\n  },\n  methods: {\n    onClick: function onClick() {\n      this.showDatePicker = true;\n    },\n    onConfirm: function onConfirm(val) {\n      var data = val;\n\n      if (this.type !== 'time') {\n        data = dateToString(val, this.type);\n      }\n\n      this.$emit('input', data);\n      this.showDatePicker = false;\n    },\n    onCancel: function onCancel() {\n      this.showDatePicker = false;\n    },\n    formatter: function formatter(type, val) {\n      var word = t(\"format.\" + type);\n      return \"\" + val + word;\n    }\n  },\n  render: function render() {\n    var _this = this;\n\n    var h = arguments[0];\n    return h(Field, {\n      \"attrs\": {\n        \"readonly\": true,\n        \"is-link\": true,\n        \"center\": true,\n        \"value\": this.value,\n        \"label\": this.label,\n        \"required\": this.required,\n        \"placeholder\": this.placeholder\n      },\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [h(Popup, {\n      \"attrs\": {\n        \"round\": true,\n        \"position\": \"bottom\",\n        \"getContainer\": \"body\"\n      },\n      \"slot\": \"extra\",\n      \"model\": {\n        value: _this.showDatePicker,\n        callback: function callback($$v) {\n          _this.showDatePicker = $$v;\n        }\n      }\n    }, [h(DateTimePicker, {\n      \"attrs\": {\n        \"type\": this.type,\n        \"title\": this.title,\n        \"value\": this.currentDate,\n        \"minDate\": this.minDate,\n        \"formatter\": this.formatter\n      },\n      \"on\": {\n        \"cancel\": this.onCancel,\n        \"confirm\": this.onConfirm\n      }\n    })])]);\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}