{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/\\u5C0F\\u738B/Desktop/heimamm/hmtt/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/\\u5C0F\\u738B/Desktop/heimamm/hmtt/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Lazyload } from 'vant'; //导入x号点击模板\n\nimport { firstActions, secondActions } from '@/api/report.js';\nimport { timeAgo } from '@/utils/date.js';\nimport { dislikeArticleAPI, reportArticleAPI } from '@/api/index.js';\nimport { Notify } from 'vant';\nexport default {\n  props: {\n    article: [],\n    isShow: {\n      default: true,\n      type: Boolean\n    }\n  },\n  data: function data() {\n    return {\n      bottomText: '取消',\n      formatTime: timeAgo,\n      show: false,\n      actions: [{\n        name: '不感兴趣'\n      }, {\n        name: '反馈垃圾信息' //点击这个按钮时进行数据的切换\n        //监听用户点击的是哪个按钮\n\n      }]\n    };\n  },\n  methods: {\n    //点击选项事件\n    onSelect: function onSelect(item) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res, res2;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(item.name === '反馈垃圾信息')) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _this.actions = secondActions;\n                _this.bottomText = '返回';\n                _context.next = 19;\n                break;\n\n              case 5:\n                if (!(item.name === '不感兴趣')) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.next = 8;\n                return dislikeArticleAPI(_this.article.art_id);\n\n              case 8:\n                res = _context.sent;\n                _this.show = false;\n                Notify({\n                  message: '反馈成功',\n                  background: '#57ff5d'\n                });\n                _context.next = 19;\n                break;\n\n              case 13:\n                _context.next = 15;\n                return reportArticleAPI({\n                  artId: _this.article.art_id,\n                  type: item.value\n                });\n\n              case 15:\n                res2 = _context.sent;\n                console.log(res2);\n                _this.show = false;\n                Notify({\n                  message: '反馈成功',\n                  background: '#57ff5d'\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    //点击取消事件\n    onCancel: function onCancel() {\n      if (this.bottomText === '返回') {\n        this.show = true;\n        this.actions = firstActions;\n        this.bottomText = '取消';\n      } else {\n        this.show = false;\n      }\n    },\n    //点击蒙版取消事件\n    closeFn: function closeFn() {\n      this.actions = firstActions;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,SACAA,QADA,QAEA,MAFA,C,CAIA;;AACA,SACAC,YADA,EAEAC,aAFA,QAGA,iBAHA;AAIA,SACAC,OADA,QAEA,iBAFA;AAGA,SACAC,iBADA,EAEAC,gBAFA,QAGA,gBAHA;AAIA,SACAC,MADA,QAEA,MAFA;AAGA;EACAC;IACAC,WADA;IAEAC;MACAC,aADA;MAEAC;IAFA;EAFA,CADA;EAQAC,IARA,kBAQA;IACA;MACAC,gBADA;MAEAC,mBAFA;MAGAC,WAHA;MAIAC;QACAC;MADA,GAGA;QACAA,cADA,CAEA;QACA;;MAHA,CAHA;IAJA;EAcA,CAvBA;EAwBAC;IACA;IACAC,QAFA,oBAEAC,IAFA,EAEA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MAGAA,sBAHA;kBAAA;kBAAA;gBAAA;;gBAIA;gBACA;gBALA;gBAAA;;cAAA;gBAAA,MAMAA,oBANA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAOAhB,uCAPA;;cAAA;gBAOAiB,GAPA;gBAQA;gBACAf;kBACAgB,eADA;kBAEAC;gBAFA;gBATA;gBAAA;;cAAA;gBAAA;gBAAA,OAeAlB;kBACAmB,2BADA;kBAEAb;gBAFA,EAfA;;cAAA;gBAeAc,IAfA;gBAmBAC;gBACA;gBACApB;kBACAgB,eADA;kBAEAC;gBAFA;;cArBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA0BA,CA5BA;IA6BA;IACAI,QA9BA,sBA8BA;MACA;QACA;QACA;QACA;MACA,CAJA,MAIA;QACA;MACA;IACA,CAtCA;IAuCA;IACAC,OAxCA,qBAwCA;MACA;IACA;EA1CA;AAxBA","names":["Lazyload","firstActions","secondActions","timeAgo","dislikeArticleAPI","reportArticleAPI","Notify","props","article","isShow","default","type","data","bottomText","formatTime","show","actions","name","methods","onSelect","item","res","message","background","artId","res2","console","onCancel","closeFn"],"sourceRoot":"src/components","sources":["ArticleItem.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-cell>\r\n      <!-- 标题区域的插槽 -->\r\n      <template #title>\r\n        <div class=\"title-box\">\r\n          <!-- 标题 -->\r\n          <span>{{ article.title }}</span>\r\n          <!-- 单张图片 -->\r\n          <lazy-component>\r\n            <img :src=\"article.cover.images[0]\" alt=\"\" class=\"thumb\" v-if=\"article.cover.type === 1\" />\r\n          </lazy-component>\r\n        </div>\r\n        <!-- 三张图片 -->\r\n        <lazy-component>\r\n          <div class=\"thumb-box\" v-if=\"article.cover.type === 3\">\r\n            <img :src=\"article.cover.images[0]\" alt=\"\" class=\"thumb\" />\r\n            <img :src=\"article.cover.images[1]\" alt=\"\" class=\"thumb\" />\r\n            <img :src=\"article.cover.images[2]\" alt=\"\" class=\"thumb\" />\r\n          </div>\r\n        </lazy-component>\r\n      </template>\r\n      <!-- label 区域的插槽 -->\r\n      <template #label>\r\n        <div class=\"label-box\">\r\n          <span>{{ article.aut_name }} &nbsp;&nbsp; {{ article.comm_count }}评论\r\n            &nbsp;&nbsp; 发布日期 {{ formatTime(article.pubdate) }}</span>\r\n          <!-- 关闭按钮 -->\r\n          <van-icon name=\"cross\" @click.stop=\"show = true\" v-if=\"isShow\" />\r\n        </div>\r\n      </template>\r\n    </van-cell>\r\n    <van-action-sheet v-model=\"show\" :actions=\"actions\" :cancel-text=\"bottomText\" @select=\"onSelect\" @cancel=\"onCancel\"\r\n      @close=\"closeFn\" />\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n  import {\r\n    Lazyload\r\n  } from 'vant';\r\n\r\n  //导入x号点击模板\r\n  import {\r\n    firstActions,\r\n    secondActions\r\n  } from '@/api/report.js'\r\n  import {\r\n    timeAgo\r\n  } from '@/utils/date.js'\r\n  import {\r\n    dislikeArticleAPI,\r\n    reportArticleAPI\r\n  } from '@/api/index.js'\r\n  import {\r\n    Notify\r\n  } from 'vant'\r\n  export default {\r\n    props: {\r\n      article: [],\r\n      isShow: {\r\n        default: true,\r\n        type: Boolean\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        bottomText: '取消',\r\n        formatTime: timeAgo,\r\n        show: false,\r\n        actions: [{\r\n            name: '不感兴趣',\r\n          },\r\n          {\r\n            name: '反馈垃圾信息',\r\n            //点击这个按钮时进行数据的切换\r\n            //监听用户点击的是哪个按钮\r\n          },\r\n        ],\r\n      }\r\n    },\r\n    methods: {\r\n      //点击选项事件\r\n      async onSelect(item) {\r\n        // 点击选项时默认不会关闭菜单，可以手动关闭\r\n        //item是点击的选项\r\n        if (item.name === '反馈垃圾信息') {\r\n          this.actions = secondActions\r\n          this.bottomText = '返回'\r\n        } else if (item.name === '不感兴趣') {\r\n          const res = await dislikeArticleAPI(this.article.art_id)\r\n          this.show = false\r\n          Notify({\r\n            message: '反馈成功',\r\n            background: '#57ff5d'\r\n          })\r\n        } else {\r\n          //二级的反馈选项\r\n          const res2 = await reportArticleAPI({\r\n            artId: this.article.art_id,\r\n            type: item.value,\r\n          })\r\n          console.log(res2)\r\n          this.show = false\r\n          Notify({\r\n            message: '反馈成功',\r\n            background: '#57ff5d'\r\n          })\r\n        }\r\n      },\r\n      //点击取消事件\r\n      onCancel() {\r\n        if (this.bottomText === '返回') {\r\n          this.show = true\r\n          this.actions = firstActions\r\n          this.bottomText = '取消'\r\n        } else {\r\n          this.show = false\r\n        }\r\n      },\r\n      //点击蒙版取消事件\r\n      closeFn() {\r\n        this.actions = firstActions\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .label-box {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n\r\n  .thumb {\r\n    // 矩形黄金比例：0.618\r\n    width: 113px;\r\n    height: 70px;\r\n    background-color: #f8f8f8;\r\n    object-fit: cover;\r\n  }\r\n\r\n  .title-box {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: flex-start;\r\n  }\r\n\r\n  .thumb-box {\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n</style>"]},"metadata":{},"sourceType":"module"}