{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport Popup from '../popup';\nimport Toast from '../toast';\nimport ImagePreview from '../image-preview';\nimport SkuHeader from './components/SkuHeader';\nimport SkuHeaderItem from './components/SkuHeaderItem';\nimport SkuRow from './components/SkuRow';\nimport SkuRowItem from './components/SkuRowItem';\nimport SkuRowPropItem from './components/SkuRowPropItem';\nimport SkuStepper from './components/SkuStepper';\nimport SkuMessages from './components/SkuMessages';\nimport SkuActions from './components/SkuActions';\nimport { createNamespace, isEmpty } from '../utils';\nimport { isAllSelected, isSkuChoosable, getSkuComb, getSelectedSkuValues, getSelectedPropValues, getSelectedProperties } from './utils/sku-helper';\nimport { LIMIT_TYPE, UNSELECTED_SKU_VALUE_ID } from './constants';\nvar namespace = createNamespace('sku');\nvar createComponent = namespace[0],\n    bem = namespace[1],\n    t = namespace[2];\nvar QUOTA_LIMIT = LIMIT_TYPE.QUOTA_LIMIT;\nexport default createComponent({\n  props: {\n    sku: Object,\n    goods: Object,\n    value: Boolean,\n    buyText: String,\n    goodsId: [Number, String],\n    priceTag: String,\n    lazyLoad: Boolean,\n    hideStock: Boolean,\n    properties: Array,\n    addCartText: String,\n    stepperTitle: String,\n    getContainer: [String, Function],\n    hideQuotaText: Boolean,\n    hideSelectedText: Boolean,\n    resetStepperOnHide: Boolean,\n    customSkuValidator: Function,\n    disableStepperInput: Boolean,\n    resetSelectedSkuOnHide: Boolean,\n    quota: {\n      type: Number,\n      default: 0\n    },\n    quotaUsed: {\n      type: Number,\n      default: 0\n    },\n    startSaleNum: {\n      type: Number,\n      default: 1\n    },\n    initialSku: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    stockThreshold: {\n      type: Number,\n      default: 50\n    },\n    showSoldoutSku: {\n      type: Boolean,\n      default: true\n    },\n    showAddCartBtn: {\n      type: Boolean,\n      default: true\n    },\n    disableSoldoutSku: {\n      type: Boolean,\n      default: true\n    },\n    customStepperConfig: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    showHeaderImage: {\n      type: Boolean,\n      default: true\n    },\n    previewOnClickImage: {\n      type: Boolean,\n      default: true\n    },\n    safeAreaInsetBottom: {\n      type: Boolean,\n      default: true\n    },\n    closeOnClickOverlay: {\n      type: Boolean,\n      default: true\n    },\n    bodyOffsetTop: {\n      type: Number,\n      default: 200\n    },\n    messageConfig: {\n      type: Object,\n      default: function _default() {\n        return {\n          initialMessages: {},\n          placeholderMap: {},\n          uploadImg: function uploadImg() {\n            return Promise.resolve();\n          },\n          uploadMaxSize: 5\n        };\n      }\n    }\n  },\n  data: function data() {\n    return {\n      selectedSku: {},\n      selectedProp: {},\n      selectedNum: 1,\n      show: this.value\n    };\n  },\n  watch: {\n    show: function show(val) {\n      this.$emit('input', val);\n\n      if (!val) {\n        this.$emit('sku-close', {\n          selectedSkuValues: this.selectedSkuValues,\n          selectedNum: this.selectedNum,\n          selectedSkuComb: this.selectedSkuComb\n        });\n\n        if (this.resetStepperOnHide) {\n          this.resetStepper();\n        }\n\n        if (this.resetSelectedSkuOnHide) {\n          this.resetSelectedSku();\n        }\n      }\n    },\n    value: function value(val) {\n      this.show = val;\n    },\n    skuTree: 'resetSelectedSku',\n    initialSku: function initialSku() {\n      this.resetStepper();\n      this.resetSelectedSku();\n    }\n  },\n  computed: {\n    skuGroupClass: function skuGroupClass() {\n      return ['van-sku-group-container', {\n        'van-sku-group-container--hide-soldout': !this.showSoldoutSku\n      }];\n    },\n    bodyStyle: function bodyStyle() {\n      if (this.$isServer) {\n        return;\n      }\n\n      var maxHeight = window.innerHeight - this.bodyOffsetTop;\n      return {\n        maxHeight: maxHeight + 'px'\n      };\n    },\n    isSkuCombSelected: function isSkuCombSelected() {\n      var _this = this; // SKU 未选完\n\n\n      if (this.hasSku && !isAllSelected(this.skuTree, this.selectedSku)) {\n        return false;\n      } // 属性未全选\n\n\n      return !this.propList.filter(function (i) {\n        return i.is_necessary !== false;\n      }).some(function (i) {\n        return (_this.selectedProp[i.k_id] || []).length === 0;\n      });\n    },\n    isSkuEmpty: function isSkuEmpty() {\n      return Object.keys(this.sku).length === 0;\n    },\n    hasSku: function hasSku() {\n      return !this.sku.none_sku;\n    },\n    hasSkuOrAttr: function hasSkuOrAttr() {\n      return this.hasSku || this.propList.length > 0;\n    },\n    selectedSkuComb: function selectedSkuComb() {\n      var skuComb = null;\n\n      if (this.isSkuCombSelected) {\n        if (this.hasSku) {\n          skuComb = getSkuComb(this.skuList, this.selectedSku);\n        } else {\n          skuComb = {\n            id: this.sku.collection_id,\n            price: Math.round(this.sku.price * 100),\n            stock_num: this.sku.stock_num\n          };\n        }\n\n        if (skuComb) {\n          skuComb.properties = getSelectedProperties(this.propList, this.selectedProp);\n          skuComb.property_price = this.selectedPropValues.reduce(function (acc, cur) {\n            return acc + (cur.price || 0);\n          }, 0);\n        }\n      }\n\n      return skuComb;\n    },\n    selectedSkuValues: function selectedSkuValues() {\n      return getSelectedSkuValues(this.skuTree, this.selectedSku);\n    },\n    selectedPropValues: function selectedPropValues() {\n      return getSelectedPropValues(this.propList, this.selectedProp);\n    },\n    price: function price() {\n      if (this.selectedSkuComb) {\n        return ((this.selectedSkuComb.price + this.selectedSkuComb.property_price) / 100).toFixed(2);\n      } // sku.price是一个格式化好的价格区间\n\n\n      return this.sku.price;\n    },\n    originPrice: function originPrice() {\n      if (this.selectedSkuComb && this.selectedSkuComb.origin_price) {\n        return ((this.selectedSkuComb.origin_price + this.selectedSkuComb.property_price) / 100).toFixed(2);\n      }\n\n      return this.sku.origin_price;\n    },\n    skuTree: function skuTree() {\n      return this.sku.tree || [];\n    },\n    skuList: function skuList() {\n      return this.sku.list || [];\n    },\n    propList: function propList() {\n      return this.properties || [];\n    },\n    imageList: function imageList() {\n      var imageList = [this.goods.picture];\n\n      if (this.skuTree.length > 0) {\n        this.skuTree.forEach(function (treeItem) {\n          if (!treeItem.v) {\n            return;\n          }\n\n          treeItem.v.forEach(function (vItem) {\n            var imgUrl = vItem.previewImgUrl || vItem.imgUrl || vItem.img_url;\n\n            if (imgUrl && imageList.indexOf(imgUrl) === -1) {\n              imageList.push(imgUrl);\n            }\n          });\n        });\n      }\n\n      return imageList;\n    },\n    stock: function stock() {\n      var stockNum = this.customStepperConfig.stockNum;\n\n      if (stockNum !== undefined) {\n        return stockNum;\n      }\n\n      if (this.selectedSkuComb) {\n        return this.selectedSkuComb.stock_num;\n      }\n\n      return this.sku.stock_num;\n    },\n    stockText: function stockText() {\n      var h = this.$createElement;\n      var stockFormatter = this.customStepperConfig.stockFormatter;\n\n      if (stockFormatter) {\n        return stockFormatter(this.stock);\n      }\n\n      return [t('stock') + \" \", h(\"span\", {\n        \"class\": bem('stock-num', {\n          highlight: this.stock < this.stockThreshold\n        })\n      }, [this.stock]), \" \" + t('stockUnit')];\n    },\n    selectedText: function selectedText() {\n      var _this2 = this;\n\n      if (this.selectedSkuComb) {\n        var values = this.selectedSkuValues.concat(this.selectedPropValues);\n        return t('selected') + \" \" + values.map(function (item) {\n          return item.name;\n        }).join(' ');\n      }\n\n      var unselectedSku = this.skuTree.filter(function (item) {\n        return _this2.selectedSku[item.k_s] === UNSELECTED_SKU_VALUE_ID;\n      }).map(function (item) {\n        return item.k;\n      });\n      var unselectedProp = this.propList.filter(function (item) {\n        return (_this2.selectedProp[item.k_id] || []).length < 1;\n      }).map(function (item) {\n        return item.k;\n      });\n      return t('select') + \" \" + unselectedSku.concat(unselectedProp).join(' ');\n    }\n  },\n  created: function created() {\n    var skuEventBus = new Vue();\n    this.skuEventBus = skuEventBus;\n    skuEventBus.$on('sku:select', this.onSelect);\n    skuEventBus.$on('sku:propSelect', this.onPropSelect);\n    skuEventBus.$on('sku:numChange', this.onNumChange);\n    skuEventBus.$on('sku:previewImage', this.onPreviewImage);\n    skuEventBus.$on('sku:overLimit', this.onOverLimit);\n    skuEventBus.$on('sku:stepperState', this.onStepperState);\n    skuEventBus.$on('sku:addCart', this.onAddCart);\n    skuEventBus.$on('sku:buy', this.onBuy);\n    this.resetStepper();\n    this.resetSelectedSku(); // 组件初始化后的钩子，抛出skuEventBus\n\n    this.$emit('after-sku-create', skuEventBus);\n  },\n  methods: {\n    resetStepper: function resetStepper() {\n      var skuStepper = this.$refs.skuStepper;\n      var selectedNum = this.initialSku.selectedNum;\n      var num = selectedNum != null ? selectedNum : this.startSaleNum; // 用来缓存不合法的情况\n\n      this.stepperError = null;\n\n      if (skuStepper) {\n        skuStepper.setCurrentNum(num);\n      } else {\n        // 当首次加载（skuStepper 为空）时，传入数量如果不合法，可能会存在问题\n        this.selectedNum = num;\n      }\n    },\n    // @exposed-api\n    resetSelectedSku: function resetSelectedSku() {\n      var _this3 = this;\n\n      this.selectedSku = {}; // 重置 selectedSku\n\n      this.skuTree.forEach(function (item) {\n        _this3.selectedSku[item.k_s] = UNSELECTED_SKU_VALUE_ID;\n      });\n      this.skuTree.forEach(function (item) {\n        var key = item.k_s; // 规格值只有1个时，优先判断\n\n        var valueId = item.v.length === 1 ? item.v[0].id : _this3.initialSku[key];\n\n        if (valueId && isSkuChoosable(_this3.skuList, _this3.selectedSku, {\n          key: key,\n          valueId: valueId\n        })) {\n          _this3.selectedSku[key] = valueId;\n        }\n      });\n      var skuValues = this.selectedSkuValues;\n\n      if (skuValues.length > 0) {\n        this.$nextTick(function () {\n          _this3.$emit('sku-selected', {\n            skuValue: skuValues[skuValues.length - 1],\n            selectedSku: _this3.selectedSku,\n            selectedSkuComb: _this3.selectedSkuComb\n          });\n        });\n      } // 重置商品属性\n\n\n      this.selectedProp = {};\n      var _this$initialSku$sele = this.initialSku.selectedProp,\n          selectedProp = _this$initialSku$sele === void 0 ? {} : _this$initialSku$sele; // 选中外部传入信息\n\n      this.propList.forEach(function (item) {\n        if (selectedProp[item.k_id]) {\n          _this3.selectedProp[item.k_id] = selectedProp[item.k_id];\n        }\n      });\n\n      if (isEmpty(this.selectedProp)) {\n        this.propList.forEach(function (item) {\n          var _item$v; // 没有加价的属性，默认选中第一个\n\n\n          if ((item == null ? void 0 : (_item$v = item.v) == null ? void 0 : _item$v.length) > 0) {\n            var v = item.v,\n                k_id = item.k_id;\n            var isHasConfigPrice = v.some(function (i) {\n              return +i.price !== 0;\n            });\n\n            if (!isHasConfigPrice) {\n              _this3.selectedProp[k_id] = [v[0].id];\n            }\n          }\n        });\n      }\n\n      var propValues = this.selectedPropValues;\n\n      if (propValues.length > 0) {\n        this.$emit('sku-prop-selected', {\n          propValue: propValues[propValues.length - 1],\n          selectedProp: this.selectedProp,\n          selectedSkuComb: this.selectedSkuComb\n        });\n      } // 抛出重置事件\n\n\n      this.$emit('sku-reset', {\n        selectedSku: this.selectedSku,\n        selectedProp: this.selectedProp,\n        selectedSkuComb: this.selectedSkuComb\n      });\n      this.centerInitialSku();\n    },\n    getSkuMessages: function getSkuMessages() {\n      return this.$refs.skuMessages ? this.$refs.skuMessages.getMessages() : {};\n    },\n    getSkuCartMessages: function getSkuCartMessages() {\n      return this.$refs.skuMessages ? this.$refs.skuMessages.getCartMessages() : {};\n    },\n    validateSkuMessages: function validateSkuMessages() {\n      return this.$refs.skuMessages ? this.$refs.skuMessages.validateMessages() : '';\n    },\n    validateSku: function validateSku() {\n      if (this.selectedNum === 0) {\n        return t('unavailable');\n      }\n\n      if (this.isSkuCombSelected) {\n        return this.validateSkuMessages();\n      } // 自定义sku校验\n\n\n      if (this.customSkuValidator) {\n        var err = this.customSkuValidator(this);\n        if (err) return err;\n      }\n\n      return t('selectSku');\n    },\n    onSelect: function onSelect(skuValue) {\n      var _extends2, _extends3; // 点击已选中的sku时则取消选中\n\n\n      this.selectedSku = this.selectedSku[skuValue.skuKeyStr] === skuValue.id ? _extends({}, this.selectedSku, (_extends2 = {}, _extends2[skuValue.skuKeyStr] = UNSELECTED_SKU_VALUE_ID, _extends2)) : _extends({}, this.selectedSku, (_extends3 = {}, _extends3[skuValue.skuKeyStr] = skuValue.id, _extends3));\n      this.$emit('sku-selected', {\n        skuValue: skuValue,\n        selectedSku: this.selectedSku,\n        selectedSkuComb: this.selectedSkuComb\n      });\n    },\n    onPropSelect: function onPropSelect(propValue) {\n      var _extends4;\n\n      var arr = this.selectedProp[propValue.skuKeyStr] || [];\n      var pos = arr.indexOf(propValue.id);\n\n      if (pos > -1) {\n        arr.splice(pos, 1);\n      } else if (propValue.multiple) {\n        arr.push(propValue.id);\n      } else {\n        arr.splice(0, 1, propValue.id);\n      }\n\n      this.selectedProp = _extends({}, this.selectedProp, (_extends4 = {}, _extends4[propValue.skuKeyStr] = arr, _extends4));\n      this.$emit('sku-prop-selected', {\n        propValue: propValue,\n        selectedProp: this.selectedProp,\n        selectedSkuComb: this.selectedSkuComb\n      });\n    },\n    onNumChange: function onNumChange(num) {\n      this.selectedNum = num;\n    },\n    onPreviewImage: function onPreviewImage(selectedValue) {\n      var _this4 = this;\n\n      var imageList = this.imageList;\n      var index = 0;\n      var indexImage = imageList[0];\n\n      if (selectedValue && selectedValue.imgUrl) {\n        this.imageList.some(function (image, pos) {\n          if (image === selectedValue.imgUrl) {\n            index = pos;\n            return true;\n          }\n\n          return false;\n        });\n        indexImage = selectedValue.imgUrl;\n      }\n\n      var params = _extends({}, selectedValue, {\n        index: index,\n        imageList: this.imageList,\n        indexImage: indexImage\n      });\n\n      this.$emit('open-preview', params);\n\n      if (!this.previewOnClickImage) {\n        return;\n      }\n\n      ImagePreview({\n        images: this.imageList,\n        startPosition: index,\n        onClose: function onClose() {\n          _this4.$emit('close-preview', params);\n        }\n      });\n    },\n    onOverLimit: function onOverLimit(data) {\n      var action = data.action,\n          limitType = data.limitType,\n          quota = data.quota,\n          quotaUsed = data.quotaUsed;\n      var handleOverLimit = this.customStepperConfig.handleOverLimit;\n\n      if (handleOverLimit) {\n        handleOverLimit(data);\n        return;\n      }\n\n      if (action === 'minus') {\n        if (this.startSaleNum > 1) {\n          Toast(t('minusStartTip', this.startSaleNum));\n        } else {\n          Toast(t('minusTip'));\n        }\n      } else if (action === 'plus') {\n        if (limitType === QUOTA_LIMIT) {\n          if (quotaUsed > 0) {\n            Toast(t('quotaUsedTip', quota, quotaUsed));\n          } else {\n            Toast(t('quotaTip', quota));\n          }\n        } else {\n          Toast(t('soldout'));\n        }\n      }\n    },\n    onStepperState: function onStepperState(data) {\n      this.stepperError = data.valid ? null : _extends({}, data, {\n        action: 'plus'\n      });\n    },\n    onAddCart: function onAddCart() {\n      this.onBuyOrAddCart('add-cart');\n    },\n    onBuy: function onBuy() {\n      this.onBuyOrAddCart('buy-clicked');\n    },\n    onBuyOrAddCart: function onBuyOrAddCart(type) {\n      // sku 不符合购买条件\n      if (this.stepperError) {\n        return this.onOverLimit(this.stepperError);\n      }\n\n      var error = this.validateSku();\n\n      if (error) {\n        Toast(error);\n      } else {\n        this.$emit(type, this.getSkuData());\n      }\n    },\n    // @exposed-api\n    getSkuData: function getSkuData() {\n      return {\n        goodsId: this.goodsId,\n        messages: this.getSkuMessages(),\n        selectedNum: this.selectedNum,\n        cartMessages: this.getSkuCartMessages(),\n        selectedSkuComb: this.selectedSkuComb\n      };\n    },\n    // 当 popup 完全打开后执行\n    onOpened: function onOpened() {\n      this.centerInitialSku();\n    },\n    centerInitialSku: function centerInitialSku() {\n      var _this5 = this;\n\n      (this.$refs.skuRows || []).forEach(function (it) {\n        var _ref = it.skuRow || {},\n            k_s = _ref.k_s;\n\n        it.centerItem(_this5.initialSku[k_s]);\n      });\n    }\n  },\n  render: function render() {\n    var _this6 = this;\n\n    var h = arguments[0];\n\n    if (this.isSkuEmpty) {\n      return;\n    }\n\n    var sku = this.sku,\n        skuList = this.skuList,\n        goods = this.goods,\n        price = this.price,\n        lazyLoad = this.lazyLoad,\n        originPrice = this.originPrice,\n        skuEventBus = this.skuEventBus,\n        selectedSku = this.selectedSku,\n        selectedProp = this.selectedProp,\n        selectedNum = this.selectedNum,\n        stepperTitle = this.stepperTitle,\n        selectedSkuComb = this.selectedSkuComb,\n        showHeaderImage = this.showHeaderImage,\n        disableSoldoutSku = this.disableSoldoutSku;\n    var slotsProps = {\n      price: price,\n      originPrice: originPrice,\n      selectedNum: selectedNum,\n      skuEventBus: skuEventBus,\n      selectedSku: selectedSku,\n      selectedSkuComb: selectedSkuComb\n    };\n\n    var slots = function slots(name) {\n      return _this6.slots(name, slotsProps);\n    };\n\n    var Header = slots('sku-header') || h(SkuHeader, {\n      \"attrs\": {\n        \"sku\": sku,\n        \"goods\": goods,\n        \"skuEventBus\": skuEventBus,\n        \"selectedSku\": selectedSku,\n        \"showHeaderImage\": showHeaderImage\n      }\n    }, [h(\"template\", {\n      \"slot\": \"sku-header-image-extra\"\n    }, [slots('sku-header-image-extra')]), slots('sku-header-price') || h(\"div\", {\n      \"class\": \"van-sku__goods-price\"\n    }, [h(\"span\", {\n      \"class\": \"van-sku__price-symbol\"\n    }, [\"\\uFFE5\"]), h(\"span\", {\n      \"class\": \"van-sku__price-num\"\n    }, [price]), this.priceTag && h(\"span\", {\n      \"class\": \"van-sku__price-tag\"\n    }, [this.priceTag])]), slots('sku-header-origin-price') || originPrice && h(SkuHeaderItem, [t('originPrice'), \" \\uFFE5\", originPrice]), !this.hideStock && h(SkuHeaderItem, [h(\"span\", {\n      \"class\": \"van-sku__stock\"\n    }, [this.stockText])]), this.hasSkuOrAttr && !this.hideSelectedText && h(SkuHeaderItem, [this.selectedText]), slots('sku-header-extra')]);\n    var Group = slots('sku-group') || this.hasSkuOrAttr && h(\"div\", {\n      \"class\": this.skuGroupClass\n    }, [this.skuTree.map(function (skuTreeItem) {\n      return h(SkuRow, {\n        \"attrs\": {\n          \"skuRow\": skuTreeItem\n        },\n        \"ref\": \"skuRows\",\n        \"refInFor\": true\n      }, [skuTreeItem.v.map(function (skuValue) {\n        return h(SkuRowItem, {\n          \"attrs\": {\n            \"skuList\": skuList,\n            \"lazyLoad\": lazyLoad,\n            \"skuValue\": skuValue,\n            \"skuKeyStr\": skuTreeItem.k_s,\n            \"selectedSku\": selectedSku,\n            \"skuEventBus\": skuEventBus,\n            \"disableSoldoutSku\": disableSoldoutSku,\n            \"largeImageMode\": skuTreeItem.largeImageMode\n          }\n        });\n      })]);\n    }), this.propList.map(function (skuTreeItem) {\n      return h(SkuRow, {\n        \"attrs\": {\n          \"skuRow\": skuTreeItem\n        }\n      }, [skuTreeItem.v.map(function (skuValue) {\n        return h(SkuRowPropItem, {\n          \"attrs\": {\n            \"skuValue\": skuValue,\n            \"skuKeyStr\": skuTreeItem.k_id + '',\n            \"selectedProp\": selectedProp,\n            \"skuEventBus\": skuEventBus,\n            \"multiple\": skuTreeItem.is_multiple\n          }\n        });\n      })]);\n    })]);\n    var Stepper = slots('sku-stepper') || h(SkuStepper, {\n      \"ref\": \"skuStepper\",\n      \"attrs\": {\n        \"stock\": this.stock,\n        \"quota\": this.quota,\n        \"quotaUsed\": this.quotaUsed,\n        \"startSaleNum\": this.startSaleNum,\n        \"skuEventBus\": skuEventBus,\n        \"selectedNum\": selectedNum,\n        \"stepperTitle\": stepperTitle,\n        \"skuStockNum\": sku.stock_num,\n        \"disableStepperInput\": this.disableStepperInput,\n        \"customStepperConfig\": this.customStepperConfig,\n        \"hideQuotaText\": this.hideQuotaText\n      },\n      \"on\": {\n        \"change\": function change(event) {\n          _this6.$emit('stepper-change', event);\n        }\n      }\n    });\n    var Messages = slots('sku-messages') || h(SkuMessages, {\n      \"ref\": \"skuMessages\",\n      \"attrs\": {\n        \"goodsId\": this.goodsId,\n        \"messageConfig\": this.messageConfig,\n        \"messages\": sku.messages\n      }\n    });\n    var Actions = slots('sku-actions') || h(SkuActions, {\n      \"attrs\": {\n        \"buyText\": this.buyText,\n        \"skuEventBus\": skuEventBus,\n        \"addCartText\": this.addCartText,\n        \"showAddCartBtn\": this.showAddCartBtn\n      }\n    });\n    return h(Popup, {\n      \"attrs\": {\n        \"round\": true,\n        \"closeable\": true,\n        \"position\": \"bottom\",\n        \"getContainer\": this.getContainer,\n        \"closeOnClickOverlay\": this.closeOnClickOverlay,\n        \"safeAreaInsetBottom\": this.safeAreaInsetBottom\n      },\n      \"class\": \"van-sku-container\",\n      \"on\": {\n        \"opened\": this.onOpened\n      },\n      \"model\": {\n        value: _this6.show,\n        callback: function callback($$v) {\n          _this6.show = $$v;\n        }\n      }\n    }, [Header, h(\"div\", {\n      \"class\": \"van-sku-body\",\n      \"style\": this.bodyStyle\n    }, [slots('sku-body-top'), Group, slots('extra-sku-group'), Stepper, Messages]), slots('sku-actions-top'), Actions]);\n  }\n});","map":{"version":3,"names":["_extends","Vue","Popup","Toast","ImagePreview","SkuHeader","SkuHeaderItem","SkuRow","SkuRowItem","SkuRowPropItem","SkuStepper","SkuMessages","SkuActions","createNamespace","isEmpty","isAllSelected","isSkuChoosable","getSkuComb","getSelectedSkuValues","getSelectedPropValues","getSelectedProperties","LIMIT_TYPE","UNSELECTED_SKU_VALUE_ID","namespace","createComponent","bem","t","QUOTA_LIMIT","props","sku","Object","goods","value","Boolean","buyText","String","goodsId","Number","priceTag","lazyLoad","hideStock","properties","Array","addCartText","stepperTitle","getContainer","Function","hideQuotaText","hideSelectedText","resetStepperOnHide","customSkuValidator","disableStepperInput","resetSelectedSkuOnHide","quota","type","default","quotaUsed","startSaleNum","initialSku","_default","stockThreshold","showSoldoutSku","showAddCartBtn","disableSoldoutSku","customStepperConfig","showHeaderImage","previewOnClickImage","safeAreaInsetBottom","closeOnClickOverlay","bodyOffsetTop","messageConfig","initialMessages","placeholderMap","uploadImg","Promise","resolve","uploadMaxSize","data","selectedSku","selectedProp","selectedNum","show","watch","val","$emit","selectedSkuValues","selectedSkuComb","resetStepper","resetSelectedSku","skuTree","computed","skuGroupClass","bodyStyle","$isServer","maxHeight","window","innerHeight","isSkuCombSelected","_this","hasSku","propList","filter","i","is_necessary","some","k_id","length","isSkuEmpty","keys","none_sku","hasSkuOrAttr","skuComb","skuList","id","collection_id","price","Math","round","stock_num","property_price","selectedPropValues","reduce","acc","cur","toFixed","originPrice","origin_price","tree","list","imageList","picture","forEach","treeItem","v","vItem","imgUrl","previewImgUrl","img_url","indexOf","push","stock","stockNum","undefined","stockText","h","$createElement","stockFormatter","highlight","selectedText","_this2","values","concat","map","item","name","join","unselectedSku","k_s","k","unselectedProp","created","skuEventBus","$on","onSelect","onPropSelect","onNumChange","onPreviewImage","onOverLimit","onStepperState","onAddCart","onBuy","methods","skuStepper","$refs","num","stepperError","setCurrentNum","_this3","key","valueId","skuValues","$nextTick","skuValue","_this$initialSku$sele","_item$v","isHasConfigPrice","propValues","propValue","centerInitialSku","getSkuMessages","skuMessages","getMessages","getSkuCartMessages","getCartMessages","validateSkuMessages","validateMessages","validateSku","err","_extends2","_extends3","skuKeyStr","_extends4","arr","pos","splice","multiple","selectedValue","_this4","index","indexImage","image","params","images","startPosition","onClose","action","limitType","handleOverLimit","valid","onBuyOrAddCart","error","getSkuData","messages","cartMessages","onOpened","_this5","skuRows","it","_ref","skuRow","centerItem","render","_this6","arguments","slotsProps","slots","Header","Group","skuTreeItem","largeImageMode","is_multiple","Stepper","change","event","Messages","Actions","callback","$$v"],"sources":["C:/Users/小王/node_modules/vant/es/sku/Sku.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport Popup from '../popup';\nimport Toast from '../toast';\nimport ImagePreview from '../image-preview';\nimport SkuHeader from './components/SkuHeader';\nimport SkuHeaderItem from './components/SkuHeaderItem';\nimport SkuRow from './components/SkuRow';\nimport SkuRowItem from './components/SkuRowItem';\nimport SkuRowPropItem from './components/SkuRowPropItem';\nimport SkuStepper from './components/SkuStepper';\nimport SkuMessages from './components/SkuMessages';\nimport SkuActions from './components/SkuActions';\nimport { createNamespace, isEmpty } from '../utils';\nimport { isAllSelected, isSkuChoosable, getSkuComb, getSelectedSkuValues, getSelectedPropValues, getSelectedProperties } from './utils/sku-helper';\nimport { LIMIT_TYPE, UNSELECTED_SKU_VALUE_ID } from './constants';\nvar namespace = createNamespace('sku');\nvar createComponent = namespace[0],\n    bem = namespace[1],\n    t = namespace[2];\nvar QUOTA_LIMIT = LIMIT_TYPE.QUOTA_LIMIT;\nexport default createComponent({\n  props: {\n    sku: Object,\n    goods: Object,\n    value: Boolean,\n    buyText: String,\n    goodsId: [Number, String],\n    priceTag: String,\n    lazyLoad: Boolean,\n    hideStock: Boolean,\n    properties: Array,\n    addCartText: String,\n    stepperTitle: String,\n    getContainer: [String, Function],\n    hideQuotaText: Boolean,\n    hideSelectedText: Boolean,\n    resetStepperOnHide: Boolean,\n    customSkuValidator: Function,\n    disableStepperInput: Boolean,\n    resetSelectedSkuOnHide: Boolean,\n    quota: {\n      type: Number,\n      default: 0\n    },\n    quotaUsed: {\n      type: Number,\n      default: 0\n    },\n    startSaleNum: {\n      type: Number,\n      default: 1\n    },\n    initialSku: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    stockThreshold: {\n      type: Number,\n      default: 50\n    },\n    showSoldoutSku: {\n      type: Boolean,\n      default: true\n    },\n    showAddCartBtn: {\n      type: Boolean,\n      default: true\n    },\n    disableSoldoutSku: {\n      type: Boolean,\n      default: true\n    },\n    customStepperConfig: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    showHeaderImage: {\n      type: Boolean,\n      default: true\n    },\n    previewOnClickImage: {\n      type: Boolean,\n      default: true\n    },\n    safeAreaInsetBottom: {\n      type: Boolean,\n      default: true\n    },\n    closeOnClickOverlay: {\n      type: Boolean,\n      default: true\n    },\n    bodyOffsetTop: {\n      type: Number,\n      default: 200\n    },\n    messageConfig: {\n      type: Object,\n      default: function _default() {\n        return {\n          initialMessages: {},\n          placeholderMap: {},\n          uploadImg: function uploadImg() {\n            return Promise.resolve();\n          },\n          uploadMaxSize: 5\n        };\n      }\n    }\n  },\n  data: function data() {\n    return {\n      selectedSku: {},\n      selectedProp: {},\n      selectedNum: 1,\n      show: this.value\n    };\n  },\n  watch: {\n    show: function show(val) {\n      this.$emit('input', val);\n\n      if (!val) {\n        this.$emit('sku-close', {\n          selectedSkuValues: this.selectedSkuValues,\n          selectedNum: this.selectedNum,\n          selectedSkuComb: this.selectedSkuComb\n        });\n\n        if (this.resetStepperOnHide) {\n          this.resetStepper();\n        }\n\n        if (this.resetSelectedSkuOnHide) {\n          this.resetSelectedSku();\n        }\n      }\n    },\n    value: function value(val) {\n      this.show = val;\n    },\n    skuTree: 'resetSelectedSku',\n    initialSku: function initialSku() {\n      this.resetStepper();\n      this.resetSelectedSku();\n    }\n  },\n  computed: {\n    skuGroupClass: function skuGroupClass() {\n      return ['van-sku-group-container', {\n        'van-sku-group-container--hide-soldout': !this.showSoldoutSku\n      }];\n    },\n    bodyStyle: function bodyStyle() {\n      if (this.$isServer) {\n        return;\n      }\n\n      var maxHeight = window.innerHeight - this.bodyOffsetTop;\n      return {\n        maxHeight: maxHeight + 'px'\n      };\n    },\n    isSkuCombSelected: function isSkuCombSelected() {\n      var _this = this;\n\n      // SKU 未选完\n      if (this.hasSku && !isAllSelected(this.skuTree, this.selectedSku)) {\n        return false;\n      } // 属性未全选\n\n\n      return !this.propList.filter(function (i) {\n        return i.is_necessary !== false;\n      }).some(function (i) {\n        return (_this.selectedProp[i.k_id] || []).length === 0;\n      });\n    },\n    isSkuEmpty: function isSkuEmpty() {\n      return Object.keys(this.sku).length === 0;\n    },\n    hasSku: function hasSku() {\n      return !this.sku.none_sku;\n    },\n    hasSkuOrAttr: function hasSkuOrAttr() {\n      return this.hasSku || this.propList.length > 0;\n    },\n    selectedSkuComb: function selectedSkuComb() {\n      var skuComb = null;\n\n      if (this.isSkuCombSelected) {\n        if (this.hasSku) {\n          skuComb = getSkuComb(this.skuList, this.selectedSku);\n        } else {\n          skuComb = {\n            id: this.sku.collection_id,\n            price: Math.round(this.sku.price * 100),\n            stock_num: this.sku.stock_num\n          };\n        }\n\n        if (skuComb) {\n          skuComb.properties = getSelectedProperties(this.propList, this.selectedProp);\n          skuComb.property_price = this.selectedPropValues.reduce(function (acc, cur) {\n            return acc + (cur.price || 0);\n          }, 0);\n        }\n      }\n\n      return skuComb;\n    },\n    selectedSkuValues: function selectedSkuValues() {\n      return getSelectedSkuValues(this.skuTree, this.selectedSku);\n    },\n    selectedPropValues: function selectedPropValues() {\n      return getSelectedPropValues(this.propList, this.selectedProp);\n    },\n    price: function price() {\n      if (this.selectedSkuComb) {\n        return ((this.selectedSkuComb.price + this.selectedSkuComb.property_price) / 100).toFixed(2);\n      } // sku.price是一个格式化好的价格区间\n\n\n      return this.sku.price;\n    },\n    originPrice: function originPrice() {\n      if (this.selectedSkuComb && this.selectedSkuComb.origin_price) {\n        return ((this.selectedSkuComb.origin_price + this.selectedSkuComb.property_price) / 100).toFixed(2);\n      }\n\n      return this.sku.origin_price;\n    },\n    skuTree: function skuTree() {\n      return this.sku.tree || [];\n    },\n    skuList: function skuList() {\n      return this.sku.list || [];\n    },\n    propList: function propList() {\n      return this.properties || [];\n    },\n    imageList: function imageList() {\n      var imageList = [this.goods.picture];\n\n      if (this.skuTree.length > 0) {\n        this.skuTree.forEach(function (treeItem) {\n          if (!treeItem.v) {\n            return;\n          }\n\n          treeItem.v.forEach(function (vItem) {\n            var imgUrl = vItem.previewImgUrl || vItem.imgUrl || vItem.img_url;\n\n            if (imgUrl && imageList.indexOf(imgUrl) === -1) {\n              imageList.push(imgUrl);\n            }\n          });\n        });\n      }\n\n      return imageList;\n    },\n    stock: function stock() {\n      var stockNum = this.customStepperConfig.stockNum;\n\n      if (stockNum !== undefined) {\n        return stockNum;\n      }\n\n      if (this.selectedSkuComb) {\n        return this.selectedSkuComb.stock_num;\n      }\n\n      return this.sku.stock_num;\n    },\n    stockText: function stockText() {\n      var h = this.$createElement;\n      var stockFormatter = this.customStepperConfig.stockFormatter;\n\n      if (stockFormatter) {\n        return stockFormatter(this.stock);\n      }\n\n      return [t('stock') + \" \", h(\"span\", {\n        \"class\": bem('stock-num', {\n          highlight: this.stock < this.stockThreshold\n        })\n      }, [this.stock]), \" \" + t('stockUnit')];\n    },\n    selectedText: function selectedText() {\n      var _this2 = this;\n\n      if (this.selectedSkuComb) {\n        var values = this.selectedSkuValues.concat(this.selectedPropValues);\n        return t('selected') + \" \" + values.map(function (item) {\n          return item.name;\n        }).join(' ');\n      }\n\n      var unselectedSku = this.skuTree.filter(function (item) {\n        return _this2.selectedSku[item.k_s] === UNSELECTED_SKU_VALUE_ID;\n      }).map(function (item) {\n        return item.k;\n      });\n      var unselectedProp = this.propList.filter(function (item) {\n        return (_this2.selectedProp[item.k_id] || []).length < 1;\n      }).map(function (item) {\n        return item.k;\n      });\n      return t('select') + \" \" + unselectedSku.concat(unselectedProp).join(' ');\n    }\n  },\n  created: function created() {\n    var skuEventBus = new Vue();\n    this.skuEventBus = skuEventBus;\n    skuEventBus.$on('sku:select', this.onSelect);\n    skuEventBus.$on('sku:propSelect', this.onPropSelect);\n    skuEventBus.$on('sku:numChange', this.onNumChange);\n    skuEventBus.$on('sku:previewImage', this.onPreviewImage);\n    skuEventBus.$on('sku:overLimit', this.onOverLimit);\n    skuEventBus.$on('sku:stepperState', this.onStepperState);\n    skuEventBus.$on('sku:addCart', this.onAddCart);\n    skuEventBus.$on('sku:buy', this.onBuy);\n    this.resetStepper();\n    this.resetSelectedSku(); // 组件初始化后的钩子，抛出skuEventBus\n\n    this.$emit('after-sku-create', skuEventBus);\n  },\n  methods: {\n    resetStepper: function resetStepper() {\n      var skuStepper = this.$refs.skuStepper;\n      var selectedNum = this.initialSku.selectedNum;\n      var num = selectedNum != null ? selectedNum : this.startSaleNum; // 用来缓存不合法的情况\n\n      this.stepperError = null;\n\n      if (skuStepper) {\n        skuStepper.setCurrentNum(num);\n      } else {\n        // 当首次加载（skuStepper 为空）时，传入数量如果不合法，可能会存在问题\n        this.selectedNum = num;\n      }\n    },\n    // @exposed-api\n    resetSelectedSku: function resetSelectedSku() {\n      var _this3 = this;\n\n      this.selectedSku = {}; // 重置 selectedSku\n\n      this.skuTree.forEach(function (item) {\n        _this3.selectedSku[item.k_s] = UNSELECTED_SKU_VALUE_ID;\n      });\n      this.skuTree.forEach(function (item) {\n        var key = item.k_s; // 规格值只有1个时，优先判断\n\n        var valueId = item.v.length === 1 ? item.v[0].id : _this3.initialSku[key];\n\n        if (valueId && isSkuChoosable(_this3.skuList, _this3.selectedSku, {\n          key: key,\n          valueId: valueId\n        })) {\n          _this3.selectedSku[key] = valueId;\n        }\n      });\n      var skuValues = this.selectedSkuValues;\n\n      if (skuValues.length > 0) {\n        this.$nextTick(function () {\n          _this3.$emit('sku-selected', {\n            skuValue: skuValues[skuValues.length - 1],\n            selectedSku: _this3.selectedSku,\n            selectedSkuComb: _this3.selectedSkuComb\n          });\n        });\n      } // 重置商品属性\n\n\n      this.selectedProp = {};\n      var _this$initialSku$sele = this.initialSku.selectedProp,\n          selectedProp = _this$initialSku$sele === void 0 ? {} : _this$initialSku$sele; // 选中外部传入信息\n\n      this.propList.forEach(function (item) {\n        if (selectedProp[item.k_id]) {\n          _this3.selectedProp[item.k_id] = selectedProp[item.k_id];\n        }\n      });\n\n      if (isEmpty(this.selectedProp)) {\n        this.propList.forEach(function (item) {\n          var _item$v;\n\n          // 没有加价的属性，默认选中第一个\n          if ((item == null ? void 0 : (_item$v = item.v) == null ? void 0 : _item$v.length) > 0) {\n            var v = item.v,\n                k_id = item.k_id;\n            var isHasConfigPrice = v.some(function (i) {\n              return +i.price !== 0;\n            });\n\n            if (!isHasConfigPrice) {\n              _this3.selectedProp[k_id] = [v[0].id];\n            }\n          }\n        });\n      }\n\n      var propValues = this.selectedPropValues;\n\n      if (propValues.length > 0) {\n        this.$emit('sku-prop-selected', {\n          propValue: propValues[propValues.length - 1],\n          selectedProp: this.selectedProp,\n          selectedSkuComb: this.selectedSkuComb\n        });\n      } // 抛出重置事件\n\n\n      this.$emit('sku-reset', {\n        selectedSku: this.selectedSku,\n        selectedProp: this.selectedProp,\n        selectedSkuComb: this.selectedSkuComb\n      });\n      this.centerInitialSku();\n    },\n    getSkuMessages: function getSkuMessages() {\n      return this.$refs.skuMessages ? this.$refs.skuMessages.getMessages() : {};\n    },\n    getSkuCartMessages: function getSkuCartMessages() {\n      return this.$refs.skuMessages ? this.$refs.skuMessages.getCartMessages() : {};\n    },\n    validateSkuMessages: function validateSkuMessages() {\n      return this.$refs.skuMessages ? this.$refs.skuMessages.validateMessages() : '';\n    },\n    validateSku: function validateSku() {\n      if (this.selectedNum === 0) {\n        return t('unavailable');\n      }\n\n      if (this.isSkuCombSelected) {\n        return this.validateSkuMessages();\n      } // 自定义sku校验\n\n\n      if (this.customSkuValidator) {\n        var err = this.customSkuValidator(this);\n        if (err) return err;\n      }\n\n      return t('selectSku');\n    },\n    onSelect: function onSelect(skuValue) {\n      var _extends2, _extends3;\n\n      // 点击已选中的sku时则取消选中\n      this.selectedSku = this.selectedSku[skuValue.skuKeyStr] === skuValue.id ? _extends({}, this.selectedSku, (_extends2 = {}, _extends2[skuValue.skuKeyStr] = UNSELECTED_SKU_VALUE_ID, _extends2)) : _extends({}, this.selectedSku, (_extends3 = {}, _extends3[skuValue.skuKeyStr] = skuValue.id, _extends3));\n      this.$emit('sku-selected', {\n        skuValue: skuValue,\n        selectedSku: this.selectedSku,\n        selectedSkuComb: this.selectedSkuComb\n      });\n    },\n    onPropSelect: function onPropSelect(propValue) {\n      var _extends4;\n\n      var arr = this.selectedProp[propValue.skuKeyStr] || [];\n      var pos = arr.indexOf(propValue.id);\n\n      if (pos > -1) {\n        arr.splice(pos, 1);\n      } else if (propValue.multiple) {\n        arr.push(propValue.id);\n      } else {\n        arr.splice(0, 1, propValue.id);\n      }\n\n      this.selectedProp = _extends({}, this.selectedProp, (_extends4 = {}, _extends4[propValue.skuKeyStr] = arr, _extends4));\n      this.$emit('sku-prop-selected', {\n        propValue: propValue,\n        selectedProp: this.selectedProp,\n        selectedSkuComb: this.selectedSkuComb\n      });\n    },\n    onNumChange: function onNumChange(num) {\n      this.selectedNum = num;\n    },\n    onPreviewImage: function onPreviewImage(selectedValue) {\n      var _this4 = this;\n\n      var imageList = this.imageList;\n      var index = 0;\n      var indexImage = imageList[0];\n\n      if (selectedValue && selectedValue.imgUrl) {\n        this.imageList.some(function (image, pos) {\n          if (image === selectedValue.imgUrl) {\n            index = pos;\n            return true;\n          }\n\n          return false;\n        });\n        indexImage = selectedValue.imgUrl;\n      }\n\n      var params = _extends({}, selectedValue, {\n        index: index,\n        imageList: this.imageList,\n        indexImage: indexImage\n      });\n\n      this.$emit('open-preview', params);\n\n      if (!this.previewOnClickImage) {\n        return;\n      }\n\n      ImagePreview({\n        images: this.imageList,\n        startPosition: index,\n        onClose: function onClose() {\n          _this4.$emit('close-preview', params);\n        }\n      });\n    },\n    onOverLimit: function onOverLimit(data) {\n      var action = data.action,\n          limitType = data.limitType,\n          quota = data.quota,\n          quotaUsed = data.quotaUsed;\n      var handleOverLimit = this.customStepperConfig.handleOverLimit;\n\n      if (handleOverLimit) {\n        handleOverLimit(data);\n        return;\n      }\n\n      if (action === 'minus') {\n        if (this.startSaleNum > 1) {\n          Toast(t('minusStartTip', this.startSaleNum));\n        } else {\n          Toast(t('minusTip'));\n        }\n      } else if (action === 'plus') {\n        if (limitType === QUOTA_LIMIT) {\n          if (quotaUsed > 0) {\n            Toast(t('quotaUsedTip', quota, quotaUsed));\n          } else {\n            Toast(t('quotaTip', quota));\n          }\n        } else {\n          Toast(t('soldout'));\n        }\n      }\n    },\n    onStepperState: function onStepperState(data) {\n      this.stepperError = data.valid ? null : _extends({}, data, {\n        action: 'plus'\n      });\n    },\n    onAddCart: function onAddCart() {\n      this.onBuyOrAddCart('add-cart');\n    },\n    onBuy: function onBuy() {\n      this.onBuyOrAddCart('buy-clicked');\n    },\n    onBuyOrAddCart: function onBuyOrAddCart(type) {\n      // sku 不符合购买条件\n      if (this.stepperError) {\n        return this.onOverLimit(this.stepperError);\n      }\n\n      var error = this.validateSku();\n\n      if (error) {\n        Toast(error);\n      } else {\n        this.$emit(type, this.getSkuData());\n      }\n    },\n    // @exposed-api\n    getSkuData: function getSkuData() {\n      return {\n        goodsId: this.goodsId,\n        messages: this.getSkuMessages(),\n        selectedNum: this.selectedNum,\n        cartMessages: this.getSkuCartMessages(),\n        selectedSkuComb: this.selectedSkuComb\n      };\n    },\n    // 当 popup 完全打开后执行\n    onOpened: function onOpened() {\n      this.centerInitialSku();\n    },\n    centerInitialSku: function centerInitialSku() {\n      var _this5 = this;\n\n      (this.$refs.skuRows || []).forEach(function (it) {\n        var _ref = it.skuRow || {},\n            k_s = _ref.k_s;\n\n        it.centerItem(_this5.initialSku[k_s]);\n      });\n    }\n  },\n  render: function render() {\n    var _this6 = this;\n\n    var h = arguments[0];\n\n    if (this.isSkuEmpty) {\n      return;\n    }\n\n    var sku = this.sku,\n        skuList = this.skuList,\n        goods = this.goods,\n        price = this.price,\n        lazyLoad = this.lazyLoad,\n        originPrice = this.originPrice,\n        skuEventBus = this.skuEventBus,\n        selectedSku = this.selectedSku,\n        selectedProp = this.selectedProp,\n        selectedNum = this.selectedNum,\n        stepperTitle = this.stepperTitle,\n        selectedSkuComb = this.selectedSkuComb,\n        showHeaderImage = this.showHeaderImage,\n        disableSoldoutSku = this.disableSoldoutSku;\n    var slotsProps = {\n      price: price,\n      originPrice: originPrice,\n      selectedNum: selectedNum,\n      skuEventBus: skuEventBus,\n      selectedSku: selectedSku,\n      selectedSkuComb: selectedSkuComb\n    };\n\n    var slots = function slots(name) {\n      return _this6.slots(name, slotsProps);\n    };\n\n    var Header = slots('sku-header') || h(SkuHeader, {\n      \"attrs\": {\n        \"sku\": sku,\n        \"goods\": goods,\n        \"skuEventBus\": skuEventBus,\n        \"selectedSku\": selectedSku,\n        \"showHeaderImage\": showHeaderImage\n      }\n    }, [h(\"template\", {\n      \"slot\": \"sku-header-image-extra\"\n    }, [slots('sku-header-image-extra')]), slots('sku-header-price') || h(\"div\", {\n      \"class\": \"van-sku__goods-price\"\n    }, [h(\"span\", {\n      \"class\": \"van-sku__price-symbol\"\n    }, [\"\\uFFE5\"]), h(\"span\", {\n      \"class\": \"van-sku__price-num\"\n    }, [price]), this.priceTag && h(\"span\", {\n      \"class\": \"van-sku__price-tag\"\n    }, [this.priceTag])]), slots('sku-header-origin-price') || originPrice && h(SkuHeaderItem, [t('originPrice'), \" \\uFFE5\", originPrice]), !this.hideStock && h(SkuHeaderItem, [h(\"span\", {\n      \"class\": \"van-sku__stock\"\n    }, [this.stockText])]), this.hasSkuOrAttr && !this.hideSelectedText && h(SkuHeaderItem, [this.selectedText]), slots('sku-header-extra')]);\n    var Group = slots('sku-group') || this.hasSkuOrAttr && h(\"div\", {\n      \"class\": this.skuGroupClass\n    }, [this.skuTree.map(function (skuTreeItem) {\n      return h(SkuRow, {\n        \"attrs\": {\n          \"skuRow\": skuTreeItem\n        },\n        \"ref\": \"skuRows\",\n        \"refInFor\": true\n      }, [skuTreeItem.v.map(function (skuValue) {\n        return h(SkuRowItem, {\n          \"attrs\": {\n            \"skuList\": skuList,\n            \"lazyLoad\": lazyLoad,\n            \"skuValue\": skuValue,\n            \"skuKeyStr\": skuTreeItem.k_s,\n            \"selectedSku\": selectedSku,\n            \"skuEventBus\": skuEventBus,\n            \"disableSoldoutSku\": disableSoldoutSku,\n            \"largeImageMode\": skuTreeItem.largeImageMode\n          }\n        });\n      })]);\n    }), this.propList.map(function (skuTreeItem) {\n      return h(SkuRow, {\n        \"attrs\": {\n          \"skuRow\": skuTreeItem\n        }\n      }, [skuTreeItem.v.map(function (skuValue) {\n        return h(SkuRowPropItem, {\n          \"attrs\": {\n            \"skuValue\": skuValue,\n            \"skuKeyStr\": skuTreeItem.k_id + '',\n            \"selectedProp\": selectedProp,\n            \"skuEventBus\": skuEventBus,\n            \"multiple\": skuTreeItem.is_multiple\n          }\n        });\n      })]);\n    })]);\n    var Stepper = slots('sku-stepper') || h(SkuStepper, {\n      \"ref\": \"skuStepper\",\n      \"attrs\": {\n        \"stock\": this.stock,\n        \"quota\": this.quota,\n        \"quotaUsed\": this.quotaUsed,\n        \"startSaleNum\": this.startSaleNum,\n        \"skuEventBus\": skuEventBus,\n        \"selectedNum\": selectedNum,\n        \"stepperTitle\": stepperTitle,\n        \"skuStockNum\": sku.stock_num,\n        \"disableStepperInput\": this.disableStepperInput,\n        \"customStepperConfig\": this.customStepperConfig,\n        \"hideQuotaText\": this.hideQuotaText\n      },\n      \"on\": {\n        \"change\": function change(event) {\n          _this6.$emit('stepper-change', event);\n        }\n      }\n    });\n    var Messages = slots('sku-messages') || h(SkuMessages, {\n      \"ref\": \"skuMessages\",\n      \"attrs\": {\n        \"goodsId\": this.goodsId,\n        \"messageConfig\": this.messageConfig,\n        \"messages\": sku.messages\n      }\n    });\n    var Actions = slots('sku-actions') || h(SkuActions, {\n      \"attrs\": {\n        \"buyText\": this.buyText,\n        \"skuEventBus\": skuEventBus,\n        \"addCartText\": this.addCartText,\n        \"showAddCartBtn\": this.showAddCartBtn\n      }\n    });\n    return h(Popup, {\n      \"attrs\": {\n        \"round\": true,\n        \"closeable\": true,\n        \"position\": \"bottom\",\n        \"getContainer\": this.getContainer,\n        \"closeOnClickOverlay\": this.closeOnClickOverlay,\n        \"safeAreaInsetBottom\": this.safeAreaInsetBottom\n      },\n      \"class\": \"van-sku-container\",\n      \"on\": {\n        \"opened\": this.onOpened\n      },\n      \"model\": {\n        value: _this6.show,\n        callback: function callback($$v) {\n          _this6.show = $$v;\n        }\n      }\n    }, [Header, h(\"div\", {\n      \"class\": \"van-sku-body\",\n      \"style\": this.bodyStyle\n    }, [slots('sku-body-top'), Group, slots('extra-sku-group'), Stepper, Messages]), slots('sku-actions-top'), Actions]);\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}