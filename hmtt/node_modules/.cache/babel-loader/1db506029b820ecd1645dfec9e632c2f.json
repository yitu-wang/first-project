{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport { createNamespace, inBrowser } from '../utils';\nimport { raf, cancelRaf } from '../utils/dom/raf';\nimport { isSameSecond, parseTimeData, parseFormat } from './utils';\n\nvar _createNamespace = createNamespace('count-down'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  props: {\n    millisecond: Boolean,\n    time: {\n      type: [Number, String],\n      default: 0\n    },\n    format: {\n      type: String,\n      default: 'HH:mm:ss'\n    },\n    autoStart: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      remain: 0\n    };\n  },\n  computed: {\n    timeData: function timeData() {\n      return parseTimeData(this.remain);\n    },\n    formattedTime: function formattedTime() {\n      return parseFormat(this.format, this.timeData);\n    }\n  },\n  watch: {\n    time: {\n      immediate: true,\n      handler: 'reset'\n    }\n  },\n  activated: function activated() {\n    if (this.keepAlivePaused) {\n      this.counting = true;\n      this.keepAlivePaused = false;\n      this.tick();\n    }\n  },\n  deactivated: function deactivated() {\n    if (this.counting) {\n      this.pause();\n      this.keepAlivePaused = true;\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.pause();\n  },\n  methods: {\n    // @exposed-api\n    start: function start() {\n      if (this.counting) {\n        return;\n      }\n\n      this.counting = true;\n      this.endTime = Date.now() + this.remain;\n      this.tick();\n    },\n    // @exposed-api\n    pause: function pause() {\n      this.counting = false;\n      cancelRaf(this.rafId);\n    },\n    // @exposed-api\n    reset: function reset() {\n      this.pause();\n      this.remain = +this.time;\n\n      if (this.autoStart) {\n        this.start();\n      }\n    },\n    tick: function tick() {\n      // should not start counting in server\n      // see: https://github.com/youzan/vant/issues/7807\n      if (!inBrowser) {\n        return;\n      }\n\n      if (this.millisecond) {\n        this.microTick();\n      } else {\n        this.macroTick();\n      }\n    },\n    microTick: function microTick() {\n      var _this = this;\n\n      this.rafId = raf(function () {\n        /* istanbul ignore if */\n        // in case of call reset immediately after finish\n        if (!_this.counting) {\n          return;\n        }\n\n        _this.setRemain(_this.getRemain());\n\n        if (_this.remain > 0) {\n          _this.microTick();\n        }\n      });\n    },\n    macroTick: function macroTick() {\n      var _this2 = this;\n\n      this.rafId = raf(function () {\n        /* istanbul ignore if */\n        // in case of call reset immediately after finish\n        if (!_this2.counting) {\n          return;\n        }\n\n        var remain = _this2.getRemain();\n\n        if (!isSameSecond(remain, _this2.remain) || remain === 0) {\n          _this2.setRemain(remain);\n        }\n\n        if (_this2.remain > 0) {\n          _this2.macroTick();\n        }\n      });\n    },\n    getRemain: function getRemain() {\n      return Math.max(this.endTime - Date.now(), 0);\n    },\n    setRemain: function setRemain(remain) {\n      this.remain = remain;\n      this.$emit('change', this.timeData);\n\n      if (remain === 0) {\n        this.pause();\n        this.$emit('finish');\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem()\n    }, [this.slots('default', this.timeData) || this.formattedTime]);\n  }\n});","map":{"version":3,"names":["createNamespace","inBrowser","raf","cancelRaf","isSameSecond","parseTimeData","parseFormat","_createNamespace","createComponent","bem","props","millisecond","Boolean","time","type","Number","String","default","format","autoStart","data","remain","computed","timeData","formattedTime","watch","immediate","handler","activated","keepAlivePaused","counting","tick","deactivated","pause","beforeDestroy","methods","start","endTime","Date","now","rafId","reset","microTick","macroTick","_this","setRemain","getRemain","_this2","Math","max","$emit","render","h","arguments","slots"],"sources":["C:/Users/小王/node_modules/vant/es/count-down/index.js"],"sourcesContent":["import { createNamespace, inBrowser } from '../utils';\nimport { raf, cancelRaf } from '../utils/dom/raf';\nimport { isSameSecond, parseTimeData, parseFormat } from './utils';\n\nvar _createNamespace = createNamespace('count-down'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  props: {\n    millisecond: Boolean,\n    time: {\n      type: [Number, String],\n      default: 0\n    },\n    format: {\n      type: String,\n      default: 'HH:mm:ss'\n    },\n    autoStart: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      remain: 0\n    };\n  },\n  computed: {\n    timeData: function timeData() {\n      return parseTimeData(this.remain);\n    },\n    formattedTime: function formattedTime() {\n      return parseFormat(this.format, this.timeData);\n    }\n  },\n  watch: {\n    time: {\n      immediate: true,\n      handler: 'reset'\n    }\n  },\n  activated: function activated() {\n    if (this.keepAlivePaused) {\n      this.counting = true;\n      this.keepAlivePaused = false;\n      this.tick();\n    }\n  },\n  deactivated: function deactivated() {\n    if (this.counting) {\n      this.pause();\n      this.keepAlivePaused = true;\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.pause();\n  },\n  methods: {\n    // @exposed-api\n    start: function start() {\n      if (this.counting) {\n        return;\n      }\n\n      this.counting = true;\n      this.endTime = Date.now() + this.remain;\n      this.tick();\n    },\n    // @exposed-api\n    pause: function pause() {\n      this.counting = false;\n      cancelRaf(this.rafId);\n    },\n    // @exposed-api\n    reset: function reset() {\n      this.pause();\n      this.remain = +this.time;\n\n      if (this.autoStart) {\n        this.start();\n      }\n    },\n    tick: function tick() {\n      // should not start counting in server\n      // see: https://github.com/youzan/vant/issues/7807\n      if (!inBrowser) {\n        return;\n      }\n\n      if (this.millisecond) {\n        this.microTick();\n      } else {\n        this.macroTick();\n      }\n    },\n    microTick: function microTick() {\n      var _this = this;\n\n      this.rafId = raf(function () {\n        /* istanbul ignore if */\n        // in case of call reset immediately after finish\n        if (!_this.counting) {\n          return;\n        }\n\n        _this.setRemain(_this.getRemain());\n\n        if (_this.remain > 0) {\n          _this.microTick();\n        }\n      });\n    },\n    macroTick: function macroTick() {\n      var _this2 = this;\n\n      this.rafId = raf(function () {\n        /* istanbul ignore if */\n        // in case of call reset immediately after finish\n        if (!_this2.counting) {\n          return;\n        }\n\n        var remain = _this2.getRemain();\n\n        if (!isSameSecond(remain, _this2.remain) || remain === 0) {\n          _this2.setRemain(remain);\n        }\n\n        if (_this2.remain > 0) {\n          _this2.macroTick();\n        }\n      });\n    },\n    getRemain: function getRemain() {\n      return Math.max(this.endTime - Date.now(), 0);\n    },\n    setRemain: function setRemain(remain) {\n      this.remain = remain;\n      this.$emit('change', this.timeData);\n\n      if (remain === 0) {\n        this.pause();\n        this.$emit('finish');\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem()\n    }, [this.slots('default', this.timeData) || this.formattedTime]);\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}