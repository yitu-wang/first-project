{"ast":null,"code":"import { isFunction } from '../utils';\nexport function toArray(item) {\n  if (Array.isArray(item)) {\n    return item;\n  }\n\n  return [item];\n}\nexport function readFile(file, resultType) {\n  return new Promise(function (resolve) {\n    if (resultType === 'file') {\n      resolve(null);\n      return;\n    }\n\n    var reader = new FileReader();\n\n    reader.onload = function (event) {\n      resolve(event.target.result);\n    };\n\n    if (resultType === 'dataUrl') {\n      reader.readAsDataURL(file);\n    } else if (resultType === 'text') {\n      reader.readAsText(file);\n    }\n  });\n}\nexport function isOversize(files, maxSize) {\n  return toArray(files).some(function (file) {\n    if (file) {\n      if (isFunction(maxSize)) {\n        return maxSize(file);\n      }\n\n      return file.size > maxSize;\n    }\n\n    return false;\n  });\n}\nvar IMAGE_REGEXP = /\\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;\nexport function isImageUrl(url) {\n  return IMAGE_REGEXP.test(url);\n}\nexport function isImageFile(item) {\n  // some special urls cannot be recognized\n  // user can add `isImage` flag to mark it as an image url\n  if (item.isImage) {\n    return true;\n  }\n\n  if (item.file && item.file.type) {\n    return item.file.type.indexOf('image') === 0;\n  }\n\n  if (item.url) {\n    return isImageUrl(item.url);\n  }\n\n  if (item.content) {\n    return item.content.indexOf('data:image') === 0;\n  }\n\n  return false;\n}","map":{"version":3,"names":["isFunction","toArray","item","Array","isArray","readFile","file","resultType","Promise","resolve","reader","FileReader","onload","event","target","result","readAsDataURL","readAsText","isOversize","files","maxSize","some","size","IMAGE_REGEXP","isImageUrl","url","test","isImageFile","isImage","type","indexOf","content"],"sources":["C:/Users/小王/node_modules/vant/es/uploader/utils.js"],"sourcesContent":["import { isFunction } from '../utils';\nexport function toArray(item) {\n  if (Array.isArray(item)) {\n    return item;\n  }\n\n  return [item];\n}\nexport function readFile(file, resultType) {\n  return new Promise(function (resolve) {\n    if (resultType === 'file') {\n      resolve(null);\n      return;\n    }\n\n    var reader = new FileReader();\n\n    reader.onload = function (event) {\n      resolve(event.target.result);\n    };\n\n    if (resultType === 'dataUrl') {\n      reader.readAsDataURL(file);\n    } else if (resultType === 'text') {\n      reader.readAsText(file);\n    }\n  });\n}\nexport function isOversize(files, maxSize) {\n  return toArray(files).some(function (file) {\n    if (file) {\n      if (isFunction(maxSize)) {\n        return maxSize(file);\n      }\n\n      return file.size > maxSize;\n    }\n\n    return false;\n  });\n}\nvar IMAGE_REGEXP = /\\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;\nexport function isImageUrl(url) {\n  return IMAGE_REGEXP.test(url);\n}\nexport function isImageFile(item) {\n  // some special urls cannot be recognized\n  // user can add `isImage` flag to mark it as an image url\n  if (item.isImage) {\n    return true;\n  }\n\n  if (item.file && item.file.type) {\n    return item.file.type.indexOf('image') === 0;\n  }\n\n  if (item.url) {\n    return isImageUrl(item.url);\n  }\n\n  if (item.content) {\n    return item.content.indexOf('data:image') === 0;\n  }\n\n  return false;\n}"],"mappings":"AAAA,SAASA,UAAT,QAA2B,UAA3B;AACA,OAAO,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;EAC5B,IAAIC,KAAK,CAACC,OAAN,CAAcF,IAAd,CAAJ,EAAyB;IACvB,OAAOA,IAAP;EACD;;EAED,OAAO,CAACA,IAAD,CAAP;AACD;AACD,OAAO,SAASG,QAAT,CAAkBC,IAAlB,EAAwBC,UAAxB,EAAoC;EACzC,OAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmB;IACpC,IAAIF,UAAU,KAAK,MAAnB,EAA2B;MACzBE,OAAO,CAAC,IAAD,CAAP;MACA;IACD;;IAED,IAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;;IAEAD,MAAM,CAACE,MAAP,GAAgB,UAAUC,KAAV,EAAiB;MAC/BJ,OAAO,CAACI,KAAK,CAACC,MAAN,CAAaC,MAAd,CAAP;IACD,CAFD;;IAIA,IAAIR,UAAU,KAAK,SAAnB,EAA8B;MAC5BG,MAAM,CAACM,aAAP,CAAqBV,IAArB;IACD,CAFD,MAEO,IAAIC,UAAU,KAAK,MAAnB,EAA2B;MAChCG,MAAM,CAACO,UAAP,CAAkBX,IAAlB;IACD;EACF,CAjBM,CAAP;AAkBD;AACD,OAAO,SAASY,UAAT,CAAoBC,KAApB,EAA2BC,OAA3B,EAAoC;EACzC,OAAOnB,OAAO,CAACkB,KAAD,CAAP,CAAeE,IAAf,CAAoB,UAAUf,IAAV,EAAgB;IACzC,IAAIA,IAAJ,EAAU;MACR,IAAIN,UAAU,CAACoB,OAAD,CAAd,EAAyB;QACvB,OAAOA,OAAO,CAACd,IAAD,CAAd;MACD;;MAED,OAAOA,IAAI,CAACgB,IAAL,GAAYF,OAAnB;IACD;;IAED,OAAO,KAAP;EACD,CAVM,CAAP;AAWD;AACD,IAAIG,YAAY,GAAG,6CAAnB;AACA,OAAO,SAASC,UAAT,CAAoBC,GAApB,EAAyB;EAC9B,OAAOF,YAAY,CAACG,IAAb,CAAkBD,GAAlB,CAAP;AACD;AACD,OAAO,SAASE,WAAT,CAAqBzB,IAArB,EAA2B;EAChC;EACA;EACA,IAAIA,IAAI,CAAC0B,OAAT,EAAkB;IAChB,OAAO,IAAP;EACD;;EAED,IAAI1B,IAAI,CAACI,IAAL,IAAaJ,IAAI,CAACI,IAAL,CAAUuB,IAA3B,EAAiC;IAC/B,OAAO3B,IAAI,CAACI,IAAL,CAAUuB,IAAV,CAAeC,OAAf,CAAuB,OAAvB,MAAoC,CAA3C;EACD;;EAED,IAAI5B,IAAI,CAACuB,GAAT,EAAc;IACZ,OAAOD,UAAU,CAACtB,IAAI,CAACuB,GAAN,CAAjB;EACD;;EAED,IAAIvB,IAAI,CAAC6B,OAAT,EAAkB;IAChB,OAAO7B,IAAI,CAAC6B,OAAL,CAAaD,OAAb,CAAqB,YAArB,MAAuC,CAA9C;EACD;;EAED,OAAO,KAAP;AACD"},"metadata":{},"sourceType":"module"}