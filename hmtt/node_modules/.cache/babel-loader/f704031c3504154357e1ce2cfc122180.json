{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\"; // Utils\n\nimport { createNamespace } from '../utils';\nimport { raf, doubleRaf } from '../utils/dom/raf'; // Mixins\n\nimport { ChildrenMixin } from '../mixins/relation'; // Components\n\nimport Cell from '../cell';\nimport { cellProps } from '../cell/shared';\n\nvar _createNamespace = createNamespace('collapse-item'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nvar CELL_SLOTS = ['title', 'icon', 'right-icon'];\nexport default createComponent({\n  mixins: [ChildrenMixin('vanCollapse')],\n  props: _extends({}, cellProps, {\n    name: [Number, String],\n    disabled: Boolean,\n    lazyRender: {\n      type: Boolean,\n      default: true\n    },\n    isLink: {\n      type: Boolean,\n      default: true\n    }\n  }),\n  data: function data() {\n    return {\n      show: null,\n      inited: null\n    };\n  },\n  computed: {\n    currentName: function currentName() {\n      var _this$name;\n\n      return (_this$name = this.name) != null ? _this$name : this.index;\n    },\n    expanded: function expanded() {\n      var _this = this;\n\n      if (!this.parent) {\n        return null;\n      }\n\n      var _this$parent = this.parent,\n          value = _this$parent.value,\n          accordion = _this$parent.accordion;\n\n      if (process.env.NODE_ENV === 'development' && !accordion && !Array.isArray(value)) {\n        console.error('[Vant] Collapse: type of prop \"value\" should be Array');\n        return;\n      }\n\n      return accordion ? value === this.currentName : value.some(function (name) {\n        return name === _this.currentName;\n      });\n    }\n  },\n  created: function created() {\n    this.show = this.expanded;\n    this.inited = this.expanded;\n  },\n  watch: {\n    expanded: function expanded(_expanded, prev) {\n      var _this2 = this;\n\n      if (prev === null) {\n        return;\n      }\n\n      if (_expanded) {\n        this.show = true;\n        this.inited = true;\n      } // Use raf: flick when opened in safari\n      // Use nextTick: closing animation failed when set `user-select: none`\n\n\n      var nextTick = _expanded ? this.$nextTick : raf;\n      nextTick(function () {\n        var _this2$$refs = _this2.$refs,\n            content = _this2$$refs.content,\n            wrapper = _this2$$refs.wrapper;\n\n        if (!content || !wrapper) {\n          return;\n        }\n\n        var offsetHeight = content.offsetHeight;\n\n        if (offsetHeight) {\n          var contentHeight = offsetHeight + \"px\";\n          wrapper.style.height = _expanded ? 0 : contentHeight; // use double raf to ensure animation can start\n\n          doubleRaf(function () {\n            wrapper.style.height = _expanded ? contentHeight : 0;\n          });\n        } else {\n          _this2.onTransitionEnd();\n        }\n      });\n    }\n  },\n  methods: {\n    onClick: function onClick() {\n      if (!this.disabled) {\n        this.toggle();\n      }\n    },\n    // @exposed-api\n    toggle: function toggle(expanded) {\n      if (expanded === void 0) {\n        expanded = !this.expanded;\n      }\n\n      var parent = this.parent,\n          currentName = this.currentName;\n      var close = parent.accordion && currentName === parent.value;\n      var name = close ? '' : currentName;\n      this.parent.switch(name, expanded);\n    },\n    onTransitionEnd: function onTransitionEnd() {\n      if (!this.expanded) {\n        this.show = false;\n      } else {\n        this.$refs.wrapper.style.height = '';\n      }\n    },\n    genTitle: function genTitle() {\n      var _this3 = this;\n\n      var h = this.$createElement;\n      var border = this.border,\n          disabled = this.disabled,\n          expanded = this.expanded;\n      var titleSlots = CELL_SLOTS.reduce(function (slots, name) {\n        if (_this3.slots(name)) {\n          slots[name] = function () {\n            return _this3.slots(name);\n          };\n        }\n\n        return slots;\n      }, {});\n\n      if (this.slots('value')) {\n        titleSlots.default = function () {\n          return _this3.slots('value');\n        };\n      }\n\n      return h(Cell, {\n        \"attrs\": {\n          \"role\": \"button\",\n          \"tabindex\": disabled ? -1 : 0,\n          \"aria-expanded\": String(expanded)\n        },\n        \"class\": bem('title', {\n          disabled: disabled,\n          expanded: expanded,\n          borderless: !border\n        }),\n        \"on\": {\n          \"click\": this.onClick\n        },\n        \"scopedSlots\": titleSlots,\n        \"props\": _extends({}, this.$props)\n      });\n    },\n    genContent: function genContent() {\n      var h = this.$createElement;\n\n      if (this.inited || !this.lazyRender) {\n        return h(\"div\", {\n          \"directives\": [{\n            name: \"show\",\n            value: this.show\n          }],\n          \"ref\": \"wrapper\",\n          \"class\": bem('wrapper'),\n          \"on\": {\n            \"transitionend\": this.onTransitionEnd\n          }\n        }, [h(\"div\", {\n          \"ref\": \"content\",\n          \"class\": bem('content')\n        }, [this.slots()])]);\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": [bem({\n        border: this.index && this.border\n      })]\n    }, [this.genTitle(), this.genContent()]);\n  }\n});","map":{"version":3,"names":["_extends","createNamespace","raf","doubleRaf","ChildrenMixin","Cell","cellProps","_createNamespace","createComponent","bem","CELL_SLOTS","mixins","props","name","Number","String","disabled","Boolean","lazyRender","type","default","isLink","data","show","inited","computed","currentName","_this$name","index","expanded","_this","parent","_this$parent","value","accordion","process","env","NODE_ENV","Array","isArray","console","error","some","created","watch","_expanded","prev","_this2","nextTick","$nextTick","_this2$$refs","$refs","content","wrapper","offsetHeight","contentHeight","style","height","onTransitionEnd","methods","onClick","toggle","close","switch","genTitle","_this3","h","$createElement","border","titleSlots","reduce","slots","borderless","$props","genContent","render","arguments"],"sources":["C:/Users/小王/node_modules/vant/es/collapse-item/index.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\n// Utils\nimport { createNamespace } from '../utils';\nimport { raf, doubleRaf } from '../utils/dom/raf'; // Mixins\n\nimport { ChildrenMixin } from '../mixins/relation'; // Components\n\nimport Cell from '../cell';\nimport { cellProps } from '../cell/shared';\n\nvar _createNamespace = createNamespace('collapse-item'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nvar CELL_SLOTS = ['title', 'icon', 'right-icon'];\nexport default createComponent({\n  mixins: [ChildrenMixin('vanCollapse')],\n  props: _extends({}, cellProps, {\n    name: [Number, String],\n    disabled: Boolean,\n    lazyRender: {\n      type: Boolean,\n      default: true\n    },\n    isLink: {\n      type: Boolean,\n      default: true\n    }\n  }),\n  data: function data() {\n    return {\n      show: null,\n      inited: null\n    };\n  },\n  computed: {\n    currentName: function currentName() {\n      var _this$name;\n\n      return (_this$name = this.name) != null ? _this$name : this.index;\n    },\n    expanded: function expanded() {\n      var _this = this;\n\n      if (!this.parent) {\n        return null;\n      }\n\n      var _this$parent = this.parent,\n          value = _this$parent.value,\n          accordion = _this$parent.accordion;\n\n      if (process.env.NODE_ENV === 'development' && !accordion && !Array.isArray(value)) {\n        console.error('[Vant] Collapse: type of prop \"value\" should be Array');\n        return;\n      }\n\n      return accordion ? value === this.currentName : value.some(function (name) {\n        return name === _this.currentName;\n      });\n    }\n  },\n  created: function created() {\n    this.show = this.expanded;\n    this.inited = this.expanded;\n  },\n  watch: {\n    expanded: function expanded(_expanded, prev) {\n      var _this2 = this;\n\n      if (prev === null) {\n        return;\n      }\n\n      if (_expanded) {\n        this.show = true;\n        this.inited = true;\n      } // Use raf: flick when opened in safari\n      // Use nextTick: closing animation failed when set `user-select: none`\n\n\n      var nextTick = _expanded ? this.$nextTick : raf;\n      nextTick(function () {\n        var _this2$$refs = _this2.$refs,\n            content = _this2$$refs.content,\n            wrapper = _this2$$refs.wrapper;\n\n        if (!content || !wrapper) {\n          return;\n        }\n\n        var offsetHeight = content.offsetHeight;\n\n        if (offsetHeight) {\n          var contentHeight = offsetHeight + \"px\";\n          wrapper.style.height = _expanded ? 0 : contentHeight; // use double raf to ensure animation can start\n\n          doubleRaf(function () {\n            wrapper.style.height = _expanded ? contentHeight : 0;\n          });\n        } else {\n          _this2.onTransitionEnd();\n        }\n      });\n    }\n  },\n  methods: {\n    onClick: function onClick() {\n      if (!this.disabled) {\n        this.toggle();\n      }\n    },\n    // @exposed-api\n    toggle: function toggle(expanded) {\n      if (expanded === void 0) {\n        expanded = !this.expanded;\n      }\n\n      var parent = this.parent,\n          currentName = this.currentName;\n      var close = parent.accordion && currentName === parent.value;\n      var name = close ? '' : currentName;\n      this.parent.switch(name, expanded);\n    },\n    onTransitionEnd: function onTransitionEnd() {\n      if (!this.expanded) {\n        this.show = false;\n      } else {\n        this.$refs.wrapper.style.height = '';\n      }\n    },\n    genTitle: function genTitle() {\n      var _this3 = this;\n\n      var h = this.$createElement;\n      var border = this.border,\n          disabled = this.disabled,\n          expanded = this.expanded;\n      var titleSlots = CELL_SLOTS.reduce(function (slots, name) {\n        if (_this3.slots(name)) {\n          slots[name] = function () {\n            return _this3.slots(name);\n          };\n        }\n\n        return slots;\n      }, {});\n\n      if (this.slots('value')) {\n        titleSlots.default = function () {\n          return _this3.slots('value');\n        };\n      }\n\n      return h(Cell, {\n        \"attrs\": {\n          \"role\": \"button\",\n          \"tabindex\": disabled ? -1 : 0,\n          \"aria-expanded\": String(expanded)\n        },\n        \"class\": bem('title', {\n          disabled: disabled,\n          expanded: expanded,\n          borderless: !border\n        }),\n        \"on\": {\n          \"click\": this.onClick\n        },\n        \"scopedSlots\": titleSlots,\n        \"props\": _extends({}, this.$props)\n      });\n    },\n    genContent: function genContent() {\n      var h = this.$createElement;\n\n      if (this.inited || !this.lazyRender) {\n        return h(\"div\", {\n          \"directives\": [{\n            name: \"show\",\n            value: this.show\n          }],\n          \"ref\": \"wrapper\",\n          \"class\": bem('wrapper'),\n          \"on\": {\n            \"transitionend\": this.onTransitionEnd\n          }\n        }, [h(\"div\", {\n          \"ref\": \"content\",\n          \"class\": bem('content')\n        }, [this.slots()])]);\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": [bem({\n        border: this.index && this.border\n      })]\n    }, [this.genTitle(), this.genContent()]);\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}