{"ast":null,"code":"import \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { createNamespace } from '../utils';\nimport { RED } from '../utils/constant';\nimport { padZero } from '../utils/format/string';\nimport Checkbox from '../checkbox';\n\nvar _createNamespace = createNamespace('coupon'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nfunction formatTimeStamp(timeStamp) {\n  // compatible when the timestamp is seconds\n  if (timeStamp < Math.pow(10, 12)) {\n    return timeStamp * 1000;\n  }\n\n  return +timeStamp;\n}\n\nfunction getDate(timeStamp) {\n  var date = new Date(formatTimeStamp(timeStamp));\n  return date.getFullYear() + \".\" + padZero(date.getMonth() + 1) + \".\" + padZero(date.getDate());\n}\n\nfunction formatDiscount(discount) {\n  return (discount / 10).toFixed(discount % 10 === 0 ? 0 : 1);\n}\n\nfunction formatAmount(amount) {\n  return (amount / 100).toFixed(amount % 100 === 0 ? 0 : amount % 10 === 0 ? 1 : 2);\n}\n\nexport default createComponent({\n  props: {\n    coupon: Object,\n    chosen: Boolean,\n    disabled: Boolean,\n    currency: {\n      type: String,\n      default: '¥'\n    }\n  },\n  computed: {\n    validPeriod: function validPeriod() {\n      var _this$coupon = this.coupon,\n          startAt = _this$coupon.startAt,\n          endAt = _this$coupon.endAt,\n          customValidPeriod = _this$coupon.customValidPeriod;\n      return customValidPeriod || getDate(startAt) + \" - \" + getDate(endAt);\n    },\n    faceAmount: function faceAmount() {\n      var coupon = this.coupon;\n\n      if (coupon.valueDesc) {\n        return coupon.valueDesc + \"<span>\" + (coupon.unitDesc || '') + \"</span>\";\n      }\n\n      if (coupon.denominations) {\n        var denominations = formatAmount(coupon.denominations);\n        return \"<span>\" + this.currency + \"</span> \" + denominations;\n      }\n\n      if (coupon.discount) {\n        return t('discount', formatDiscount(coupon.discount));\n      }\n\n      return '';\n    },\n    conditionMessage: function conditionMessage() {\n      var condition = formatAmount(this.coupon.originCondition);\n      return condition === '0' ? t('unlimited') : t('condition', condition);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var coupon = this.coupon,\n        disabled = this.disabled;\n    var description = disabled && coupon.reason || coupon.description;\n    return h(\"div\", {\n      \"class\": bem({\n        disabled: disabled\n      })\n    }, [h(\"div\", {\n      \"class\": bem('content')\n    }, [h(\"div\", {\n      \"class\": bem('head')\n    }, [h(\"h2\", {\n      \"class\": bem('amount'),\n      \"domProps\": {\n        \"innerHTML\": this.faceAmount\n      }\n    }), h(\"p\", {\n      \"class\": bem('condition')\n    }, [this.coupon.condition || this.conditionMessage])]), h(\"div\", {\n      \"class\": bem('body')\n    }, [h(\"p\", {\n      \"class\": bem('name')\n    }, [coupon.name]), h(\"p\", {\n      \"class\": bem('valid')\n    }, [this.validPeriod]), !this.disabled && h(Checkbox, {\n      \"attrs\": {\n        \"size\": 18,\n        \"value\": this.chosen,\n        \"checkedColor\": RED\n      },\n      \"class\": bem('corner')\n    })])]), description && h(\"p\", {\n      \"class\": bem('description')\n    }, [description])]);\n  }\n});","map":{"version":3,"names":["createNamespace","RED","padZero","Checkbox","_createNamespace","createComponent","bem","t","formatTimeStamp","timeStamp","Math","pow","getDate","date","Date","getFullYear","getMonth","formatDiscount","discount","toFixed","formatAmount","amount","props","coupon","Object","chosen","Boolean","disabled","currency","type","String","default","computed","validPeriod","_this$coupon","startAt","endAt","customValidPeriod","faceAmount","valueDesc","unitDesc","denominations","conditionMessage","condition","originCondition","render","h","arguments","description","reason","name"],"sources":["C:/Users/小王/node_modules/vant/es/coupon/index.js"],"sourcesContent":["import { createNamespace } from '../utils';\nimport { RED } from '../utils/constant';\nimport { padZero } from '../utils/format/string';\nimport Checkbox from '../checkbox';\n\nvar _createNamespace = createNamespace('coupon'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nfunction formatTimeStamp(timeStamp) {\n  // compatible when the timestamp is seconds\n  if (timeStamp < Math.pow(10, 12)) {\n    return timeStamp * 1000;\n  }\n\n  return +timeStamp;\n}\n\nfunction getDate(timeStamp) {\n  var date = new Date(formatTimeStamp(timeStamp));\n  return date.getFullYear() + \".\" + padZero(date.getMonth() + 1) + \".\" + padZero(date.getDate());\n}\n\nfunction formatDiscount(discount) {\n  return (discount / 10).toFixed(discount % 10 === 0 ? 0 : 1);\n}\n\nfunction formatAmount(amount) {\n  return (amount / 100).toFixed(amount % 100 === 0 ? 0 : amount % 10 === 0 ? 1 : 2);\n}\n\nexport default createComponent({\n  props: {\n    coupon: Object,\n    chosen: Boolean,\n    disabled: Boolean,\n    currency: {\n      type: String,\n      default: '¥'\n    }\n  },\n  computed: {\n    validPeriod: function validPeriod() {\n      var _this$coupon = this.coupon,\n          startAt = _this$coupon.startAt,\n          endAt = _this$coupon.endAt,\n          customValidPeriod = _this$coupon.customValidPeriod;\n      return customValidPeriod || getDate(startAt) + \" - \" + getDate(endAt);\n    },\n    faceAmount: function faceAmount() {\n      var coupon = this.coupon;\n\n      if (coupon.valueDesc) {\n        return coupon.valueDesc + \"<span>\" + (coupon.unitDesc || '') + \"</span>\";\n      }\n\n      if (coupon.denominations) {\n        var denominations = formatAmount(coupon.denominations);\n        return \"<span>\" + this.currency + \"</span> \" + denominations;\n      }\n\n      if (coupon.discount) {\n        return t('discount', formatDiscount(coupon.discount));\n      }\n\n      return '';\n    },\n    conditionMessage: function conditionMessage() {\n      var condition = formatAmount(this.coupon.originCondition);\n      return condition === '0' ? t('unlimited') : t('condition', condition);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var coupon = this.coupon,\n        disabled = this.disabled;\n    var description = disabled && coupon.reason || coupon.description;\n    return h(\"div\", {\n      \"class\": bem({\n        disabled: disabled\n      })\n    }, [h(\"div\", {\n      \"class\": bem('content')\n    }, [h(\"div\", {\n      \"class\": bem('head')\n    }, [h(\"h2\", {\n      \"class\": bem('amount'),\n      \"domProps\": {\n        \"innerHTML\": this.faceAmount\n      }\n    }), h(\"p\", {\n      \"class\": bem('condition')\n    }, [this.coupon.condition || this.conditionMessage])]), h(\"div\", {\n      \"class\": bem('body')\n    }, [h(\"p\", {\n      \"class\": bem('name')\n    }, [coupon.name]), h(\"p\", {\n      \"class\": bem('valid')\n    }, [this.validPeriod]), !this.disabled && h(Checkbox, {\n      \"attrs\": {\n        \"size\": 18,\n        \"value\": this.chosen,\n        \"checkedColor\": RED\n      },\n      \"class\": bem('corner')\n    })])]), description && h(\"p\", {\n      \"class\": bem('description')\n    }, [description])]);\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}